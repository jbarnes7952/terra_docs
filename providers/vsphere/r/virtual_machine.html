<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Provides a VMware vSphere virtual machine resource. This can be used to create, modify, and delete virtual machines.">

    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon-13180a24.png">
    <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-32x32-62171ffd.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-16x16-2821bcc8.png" sizes="16x16">
    <link rel="manifest" href="/android-manifest.json">
    <link rel="mask-icon" href="/assets/images/favicons/safari-pinned-tab-bab846e1.svg" color="#5C4EE5">
    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@HashiCorp" />
    <meta name="twitter:creator" content="@HashiCorp" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.terraform.io/docs/providers/vsphere/r/virtual_machine.html" />
    <meta property="og:title" content="VMware vSphere: vsphere_virtual_machine - Terraform by HashiCorp" />
    <meta property="og:site_name" content="Terraform by HashiCorp"/>
    <meta property="og:image" content="https://www.terraform.io/assets/images/og-image-f5bbc98c.png"/>
    <meta property="og:image:width" content="100"/>
    <meta property="og:image:height" content="100"/>
    <meta property="og:description" content="Provides a VMware vSphere virtual machine resource. This can be used to create, modify, and delete virtual machines." />

    <title>VMware vSphere: vsphere_virtual_machine - Terraform by HashiCorp</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://use.typekit.net/wxf7mfi.css">
    <link href="/assets/stylesheets/application-825d2399.css" rel="stylesheet" />

    <!-- Site scripts -->
    <!--[if lt IE 9]><script src="/assets/javascripts/ie-compat-c141a02d.js" defer="defer"></script><![endif]-->
    <script src="/assets/javascripts/application-e080fe63.js" defer="defer"></script>

    <!-- Analytics scrpts -->
    <script defer>
      !function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),e.push(a),e}};for(var t=0;t<e.methods.length;t++){var a=e.methods[t];e[a]=e.factory(a)}e.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},e.SNIPPET_VERSION="4.0.0",e.load("0EXTgkNx0Ydje2PGXVbRhpKKoe5wtzcE")}}();var om597a24292a958,om597a24292a958_poll=function(){var e=0;return function(t,a){clearInterval(e),e=setInterval(t,a)}}();!function(e,t,a){if(e.getElementById(a))om597a24292a958_poll(function(){if(window.om_loaded&&!om597a24292a958)return(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0})},25);else{var n=!1,o=e.createElement("script");o.id=a,o.src="//a.optnmstr.com/app/js/api.min.js",o.async=!0,o.onload=o.onreadystatechange=function(){if(!(n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState))try{n=om_loaded=!0,(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0}),o.onload=o.onreadystatechange=null}catch(e){}},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(o)}}(document,0,"omapi-script");
    </script>

    
  </head>

  <body id="page-docs-vsphere-resource-vm-virtual-machine-resource" class="layout-vsphere page-vmware-vsphere-vsphere-virtual-machine">

    <svg class="hidden-print" aria-hidden="true" style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <symbol id="mega-nav-icon-angle" viewBox="0 0 13 7">
      <polygon points="6.5,6.5 0.7,1.6 1.3,0.8 6.5,5.2 11.7,0.8 12.3,1.6 "/>
    </symbol>
    <symbol id="mega-nav-icon-close" viewBox="0 0 13 15">
      <path vector-effect="non-scaling-stroke" d="M1.1 14L11.9 1M11.9 14L1.1 1"/>
    </symbol>
  </defs>
</svg>
<div class="hidden-print mega-nav-sandbox">
  <div class="mega-nav-banner">
    <div class="container">
      <div class="mega-nav-banner-item">
        <a class="mega-nav-banner-logo" href="https://www.hashicorp.com"><img src="/assets/images/mega-nav/logo-hashicorp-wordmark-bbed0e8a.svg" alt="HashiCorp Logo" /></a>
      </div>
      <div class="mega-nav-banner-item">
        <p class="mega-nav-tagline"><span class="visible-xs text-muted">Learn the</span><span class="hidden-xs text-muted">Learn how Terraform fits into the</span></p>
        <div id="#mega-nav" class="mega-nav">
          <button type="button" id="mega-nav-ctrl" class="mega-nav-ctrl">
            <div class="mega-nav-ctrl-items">
              <img src="/assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" />
              <strong>HashiCorp Suite</strong>
              <span class="mega-nav-icon-outline">
                <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg><span class="visuallyhidden">Open</span>
              </span>
            </div>
          </button>
          <div id="mega-nav-body-ct" class="mega-nav-body-ct" aria-labelledby="mega-nav-ctrl">
            <div class="mega-nav-body">
              <button type="button" id="mega-nav-close" class="mega-nav-close"><svg class="mega-nav-icon mega-nav-icon-close" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-close"></use></svg><span class="visuallyhidden">Close</span></button>
              <div class="mega-nav-body-header">
                <div class="mega-nav-body-header-item">
                  <h2 class="mega-nav-h1">Provision, Secure, Connect, and&nbsp;Run</h2>
                  <p class="mega-nav-h2">Any infrastructure for any&nbsp;application</p>
                </div>
                <div class="mega-nav-body-header-item">
                  <a href="https://www.hashicorp.com/" class="mega-nav-btn"><img src="/assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" /> Learn the HashiCorp Enterprise&nbsp;Suite <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg></a>
                </div>
              </div>
              <div class="mega-nav-body-grid">
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Provision</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vagrantup.com" class="mega-nav-grid-item mega-nav-grid-item-vagrant">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-vagrant-a7ab5898.svg" alt="Vagrant Logo" />
                        </div>
                        <b>Vagrant</b>
                        <ul>
                          <li><span class="mega-nav-tag">Build</span></li>
                          <li><span class="mega-nav-tag">Test</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.packer.io" class="mega-nav-grid-item mega-nav-grid-item-packer">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-packer-cb3b9b94.svg" alt="Packer Logo" />
                        </div>
                        <b>Packer</b>
                        <ul>
                          <li><span class="mega-nav-tag">Package</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.terraform.io" class="mega-nav-grid-item mega-nav-grid-item-terraform">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-terraform-ff69eaae.svg" alt="Terraform Logo" />
                        </div>
                        <b>Terraform</b>
                        <ul>
                          <li><span class="mega-nav-tag">Provision</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Secure</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vaultproject.io" class="mega-nav-grid-item mega-nav-grid-item-vault">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-vault-0f83e3d2.svg" alt="Vault Logo" />
                        </div>
                        <b>Vault</b>
                        <ul>
                          <li><span class="mega-nav-tag">Secure</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Connect</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.consul.io" class="mega-nav-grid-item mega-nav-grid-item-consul">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-consul-c77f6844.svg" alt="Consul Logo" />
                        </div>
                        <b>Consul</b>
                        <ul>
                          <li><span class="mega-nav-tag">Connect</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Run</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.nomadproject.io" class="mega-nav-grid-item mega-nav-grid-item-nomad">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-nomad-c4c148be.svg" alt="Nomad Logo" />
                        </div>
                        <b>Nomad</b>
                        <ul>
                          <li><span class="mega-nav-tag">Run</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="mega-nav-body-footer">
                <p>Seven elements of the modern Application Lifecycle</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="50">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="/intro/index.html">Intro</a></li>
                  <li><a href="/docs/index.html">Docs</a></li>
                  <li><a href="/guides/index.html">Guides</a></li>
                  <li><a href="/docs/extend/index.html">Extend</a></li>
                  <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
                  <li>
                    <a href="/downloads.html">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
                    </a>
                  </li>
                  <li>
                    <a href="https://github.com/hashicorp/terraform">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="42">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="/intro/index.html">Intro</a></li>
    <li><a href="/docs/index.html">Docs</a></li>
    <li><a href="/guides/index.html">Guides</a></li>
    <li><a href="/docs/extend/index.html">Extend</a></li>
    <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
  </ul>

  <div class="divider"></div>

  <ul class="external nav sidebar-nav">
    <li>
      <a href="/downloads.html">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
      </a>
    </li>
    <li>
      <a href="https://github.com/hashicorp/terraform">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
      </a>
    </li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-4 col-md-3 col-xs-12 hidden-print" role="complementary">
          <div class="docs-sidebar hidden-print affix-top" role="complementary">
      <ul class="nav docs-sidenav">
        <li>
          <a href="/docs/providers/index.html">All Providers</a>
        </li>

        <li>
          <a href="/docs/providers/vsphere/index.html">VMware vSphere Provider</a>
        </li>

        <li>
          <a href="#">Data Sources</a>
          <ul class="nav nav-visible">
            <li>
              <a href="/docs/providers/vsphere/d/compute_cluster.html">vsphere_compute_cluster</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/custom_attribute.html">vsphere_custom_attribute</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/datacenter.html">vsphere_datacenter</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/datastore.html">vsphere_datastore</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/datastore_cluster.html">vsphere_datastore_cluster</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/distributed_virtual_switch.html">vsphere_distributed_virtual_switch</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/host.html">vsphere_host</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/network.html">vsphere_network</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/resource_pool.html">vsphere_resource_pool</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/tag.html">vsphere_tag</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/tag_category.html">vsphere_tag_category</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/virtual_machine.html">vsphere_virtual_machine</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/d/vmfs_disks.html">vsphere_vmfs_disks</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#">Administration Resources</a>
          <ul class="nav nav-visible">
            <li>
              <a href="/docs/providers/vsphere/r/license.html">vsphere_license</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#">Host and Cluster Management Resources</a>
          <ul class="nav nav-visible">
            <li>
              <a href="/docs/providers/vsphere/r/compute_cluster.html">vsphere_compute_cluster</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/compute_cluster_host_group.html">vsphere_compute_cluster_host_group</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/compute_cluster_vm_affinity_rule.html">vsphere_compute_cluster_vm_affinity_rule</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/compute_cluster_vm_anti_affinity_rule.html">vsphere_compute_cluster_vm_anti_affinity_rule</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/compute_cluster_vm_dependency_rule.html">vsphere_compute_cluster_vm_dependency_rule</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/compute_cluster_vm_group.html">vsphere_compute_cluster_vm_group</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/compute_cluster_vm_host_rule.html">vsphere_compute_cluster_vm_host_rule</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/drs_vm_override.html">vsphere_drs_vm_override</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/dpm_host_override.html">vsphere_dpm_host_override</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/ha_vm_override.html">vsphere_ha_vm_override</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/resource_pool.html">vsphere_resource_pool</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#">Inventory Resources</a>
          <ul class="nav nav-visible">
            <li>
              <a href="/docs/providers/vsphere/r/custom_attribute.html">vsphere_custom_attribute</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/datacenter.html">vsphere_datacenter</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/folder.html">vsphere_folder</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/tag.html">vsphere_tag</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/tag_category.html">vsphere_tag_category</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#">Networking Resources</a>
          <ul class="nav nav-visible">
            <li>
              <a href="/docs/providers/vsphere/r/distributed_port_group.html">vsphere_distributed_port_group</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/distributed_virtual_switch.html">vsphere_distributed_virtual_switch</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/host_port_group.html">vsphere_host_port_group</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/host_virtual_switch.html">vsphere_host_virtual_switch</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#">Storage Resources</a>
          <ul class="nav nav-visible">
            <li>
              <a href="/docs/providers/vsphere/r/datastore_cluster.html">vsphere_datastore_cluster</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/datastore_cluster_vm_anti_affinity_rule.html">vsphere_datastore_cluster_vm_anti_affinity_rule</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/file.html">vsphere_file</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/nas_datastore.html">vsphere_nas_datastore</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/storage_drs_vm_override.html">vsphere_storage_drs_vm_override</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/vmfs_datastore.html">vsphere_vmfs_datastore</a>
            </li>
          </ul>
        </li>

        <li class="active">
          <a href="#">Virtual Machine Resources</a>
          <ul class="nav nav-visible">
            <li>
              <a href="/docs/providers/vsphere/r/virtual_disk.html">vsphere_virtual_disk</a>
            </li>
            <li class="active">
              <a href="/docs/providers/vsphere/r/virtual_machine.html">vsphere_virtual_machine</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/virtual_machine_snapshot.html">vsphere_virtual_machine_snapshot</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/vapp_container.html">vsphere_vapp_container</a>
            </li>
            <li>
              <a href="/docs/providers/vsphere/r/vapp_entity.html">vsphere_vapp_entity</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>

    </div>

    <div id="inner" class="col-sm-8 col-md-9 col-xs-12" role="main">
        <h1 id="vsphere_virtual_machine">
  <a name="vsphere_virtual_machine" class="anchor" href="#vsphere_virtual_machine">&raquo;</a>
  vsphere_virtual_machine
</h1>
<p>The <code>vsphere_virtual_machine</code> resource can be used to manage the complex
lifecycle of a virtual machine. It supports management of disk, network
interface, and CDROM devices, creation from scratch or cloning from template,
and migration through both host and storage vMotion.</p>
<p>For more details on working with virtual machines in vSphere, see <a href="https://docs.vmware.com/en/VMware-vSphere/6.5/com.vmware.vsphere.vm_admin.doc/GUID-55238059-912E-411F-A0E9-A7A536972A91.html">this
page</a>.</p>
<h2 id="about-working-with-virtual-machines-in-terraform">
  <a name="about-working-with-virtual-machines-in-terraform" class="anchor" href="#about-working-with-virtual-machines-in-terraform">&raquo;</a>
  About Working with Virtual Machines in Terraform
</h2>
<p>A high degree of control and flexibility is afforded to a vSphere user when it
comes to how to configure, deploy, and manage virtual machines - much more
control than given in a traditional cloud provider. As such, Terraform has to
make some decisions on how to manage the virtual machines it creates and
manages. This section documents things you need to know about your virtual
machine configuration that you should consider when setting up virtual
machines, creating templates to clone from, or migrating from previous versions
of this resource.</p>
<h3 id="disks">
  <a name="disks" class="anchor" href="#disks">&raquo;</a>
  Disks
</h3>
<p>The <code>vsphere_virtual_machine</code> resource currently only supports standard
VMDK-backed virtual disks - it does not support other special kinds of disk
devices like RDM disks.</p>
<p>Disks are managed by an arbitrary label supplied to the <a href="#label"><code>label</code></a>
attribute of a <a href="#disk-options"><code>disk</code> block</a>. This is separate from the
automatic naming that vSphere picks for you when creating a virtual machine.
Control over a virtual disk&#39;s name is not supported unless you are attaching an
external disk with the <a href="#attach"><code>attach</code></a> attribute.</p>
<p>Virtual disks can be SCSI disks only. The SCSI controllers managed by Terraform
can vary, depending on the value supplied to
<a href="#scsi_controller_count"><code>scsi_controller_count</code></a>. This also dictates the
controllers that are checked when looking for disks during a cloning process.
By default, this value is <code>1</code>, meaning that you can have up to 15 disks
configured on a virtual machine. These are all configured with the controller
type defined by the <a href="#scsi_type"><code>scsi_type</code></a> setting. If you are cloning from
a template, devices will be added or re-configured as necessary.</p>
<p>When cloning from a template, you must specify disks of either the same or
greater size than the disks in the source template when creating a traditional
clone, or exactly the same size when cloning from snapshot (also known as a
linked clone). For more details, see the section on <a href="#creating-a-virtual-machine-from-a-template">creating a virtual machine
from a template</a>.</p>
<p>A maximum of 60 virtual disks can be configured when the
<a href="#scsi_controller_count"><code>scsi_controller_count</code></a> setting is configured to its
maximum of <code>4</code> controllers. See the <a href="#disk-options">disk options</a> section for
more details.</p>
<h3 id="customization-and-network-waiters">
  <a name="customization-and-network-waiters" class="anchor" href="#customization-and-network-waiters">&raquo;</a>
  Customization and network waiters
</h3>
<p>Terraform waits during various parts of a virtual machine deployment to ensure
that it is in a correct expected state before proceeding. These happen when a
VM is created, or also when it&#39;s updated, depending on the waiter.</p>
<p>Two waiters of note are:</p>

<ul>
<li><strong>The customization waiter:</strong> This waiter watches events in vSphere to
monitor when customization on a virtual machine completes during VM creation.
Depending on your vSphere or VM configuration it may be necessary to change
the timeout or turn it off. This can be controlled by the
<a href="#timeout-1"><code>timeout</code></a> setting in the <a href="#virtual-machine-customization">customization
settings</a> block.
</li>
<li><strong>The network waiter:</strong> This waiter waits for interfaces to show up on a
guest virtual machine close to the end of both VM creation and update. This
waiter is necessary to ensure that correct IP information gets reported to
the guest virtual machine, mainly to facilitate the availability of a valid,
reachable default IP address for any <a href="/docs/provisioners/index.html">provisioners</a>.
The behavior of the waiter can be controlled with the
<a href="#wait_for_guest_net_timeout"><code>wait_for_guest_net_timeout</code></a> and
<a href="#wait_for_guest_net_routable"><code>wait_for_guest_net_routable</code></a> settings.
</li>
</ul>
<h3 id="migrating-from-a-previous-version-of-this-resource">
  <a name="migrating-from-a-previous-version-of-this-resource" class="anchor" href="#migrating-from-a-previous-version-of-this-resource">&raquo;</a>
  Migrating from a previous version of this resource
</h3>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> This section only applies to versions of this resource available
in versions v0.4.2 of this provider or earlier.</p>
</div>
<p>The path for migrating to the current version of this resource is very similar
to the <a href="#importing">import</a> path, with the exception that the <code>terraform
import</code> command does not need to be run. See that section for details on what
is required before you run <code>terraform plan</code> on a state that requires migration.</p>
<p>A successful migration usually only results in a configuration-only diff - that
is, Terraform reconciles some configuration settings that cannot be set during
the migration process with state. In this event, no reconfiguration operations
are sent to the vSphere server during the next <code>terraform apply</code>.  See the
<a href="#importing">importing</a> section for more details.</p>
<h2 id="example-usage">
  <a name="example-usage" class="anchor" href="#example-usage">&raquo;</a>
  Example Usage
</h2>
<h3 id="creating-a-virtual-machine-from-scratch">
  <a name="creating-a-virtual-machine-from-scratch" class="anchor" href="#creating-a-virtual-machine-from-scratch">&raquo;</a>
  Creating a virtual machine from scratch
</h3>
<p>The following block contains all that is necessary to create a new virtual
machine, with a single disk and network interface.</p>
<p>The resource makes use of the following data sources to do its job:
<a href="/docs/providers/vsphere/d/datacenter.html"><code>vsphere_datacenter</code></a> to locate the datacenter,
<a href="/docs/providers/vsphere/d/datastore.html"><code>vsphere_datastore</code></a> to locate the default datastore to
put the virtual machine in, <a href="/docs/providers/vsphere/d/resource_pool.html"><code>vsphere_resource_pool</code></a>
to locate a resource pool located in a cluster or standalone host, and
<a href="/docs/providers/vsphere/d/network.html"><code>vsphere_network</code></a> to locate a network.</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">data</span> <span class="s2">"vsphere_datacenter"</span> <span class="s2">"dc"</span> <span class="p">{</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="s2">"dc1"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_datastore"</span> <span class="s2">"datastore"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"datastore1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_compute_cluster"</span> <span class="s2">"cluster"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"cluster1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_network"</span> <span class="s2">"network"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"public"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="nb">name</span>             <span class="o">=</span> <span class="s2">"terraform-test"</span>
  <span class="n">resource_pool_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_compute_cluster.cluster.resource_pool_id}"</span>
  <span class="n">datastore_id</span>     <span class="o">=</span> <span class="s2">"${data.vsphere_datastore.datastore.id}"</span>

  <span class="n">num_cpus</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="n">memory</span>   <span class="o">=</span> <span class="mi">1024</span>
  <span class="n">guest_id</span> <span class="o">=</span> <span class="s2">"other3xLinux64Guest"</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_network.network.id}"</span>
  <span class="p">}</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">"disk0"</span>
    <span class="n">size</span>  <span class="o">=</span> <span class="mi">20</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="cloning-and-customization-example">
  <a name="cloning-and-customization-example" class="anchor" href="#cloning-and-customization-example">&raquo;</a>
  Cloning and customization example
</h3>
<p>Building on the above example, the below configuration creates a VM by cloning
it from a template, fetched via the
<a href="/docs/providers/vsphere/d/virtual_machine.html"><code>vsphere_virtual_machine</code></a> data source. This
allows us to locate the UUID of the template we want to clone, along with
settings for network interface type, SCSI bus type (especially important on
Windows machines), and disk attributes.</p>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Cloning requires vCenter and is not supported on direct ESXi
connections.</p>
</div>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">data</span> <span class="s2">"vsphere_datacenter"</span> <span class="s2">"dc"</span> <span class="p">{</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="s2">"dc1"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_datastore"</span> <span class="s2">"datastore"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"datastore1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_compute_cluster"</span> <span class="s2">"cluster"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"cluster1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_network"</span> <span class="s2">"network"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"public"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"template"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"ubuntu-16.04"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="nb">name</span>             <span class="o">=</span> <span class="s2">"terraform-test"</span>
  <span class="n">resource_pool_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_compute_cluster.cluster.resource_pool_id}"</span>
  <span class="n">datastore_id</span>     <span class="o">=</span> <span class="s2">"${data.vsphere_datastore.datastore.id}"</span>

  <span class="n">num_cpus</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="n">memory</span>   <span class="o">=</span> <span class="mi">1024</span>
  <span class="n">guest_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.guest_id}"</span>

  <span class="n">scsi_type</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.scsi_type}"</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.network.id}"</span>
    <span class="n">adapter_type</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.network_interface_types[0]}"</span>
  <span class="p">}</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="n">label</span>            <span class="o">=</span> <span class="s2">"disk0"</span>
    <span class="n">size</span>             <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.disks.0.size}"</span>
    <span class="n">eagerly_scrub</span>    <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.disks.0.eagerly_scrub}"</span>
    <span class="n">thin_provisioned</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.disks.0.thin_provisioned}"</span>
  <span class="p">}</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="n">template_uuid</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.id}"</span>

    <span class="n">customize</span> <span class="p">{</span>
      <span class="n">linux_options</span> <span class="p">{</span>
        <span class="n">host_name</span> <span class="o">=</span> <span class="s2">"terraform-test"</span>
        <span class="n">domain</span>    <span class="o">=</span> <span class="s2">"test.internal"</span>
      <span class="p">}</span>

      <span class="n">network_interface</span> <span class="p">{</span>
        <span class="n">ipv4_address</span> <span class="o">=</span> <span class="s2">"10.0.0.10"</span>
        <span class="n">ipv4_netmask</span> <span class="o">=</span> <span class="mi">24</span>
      <span class="p">}</span>

      <span class="n">ipv4_gateway</span> <span class="o">=</span> <span class="s2">"10.0.0.1"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="cloning-from-an-ovf-ova-created-template-with-vapp-properties">
  <a name="cloning-from-an-ovf-ova-created-template-with-vapp-properties" class="anchor" href="#cloning-from-an-ovf-ova-created-template-with-vapp-properties">&raquo;</a>
  Cloning from an OVF/OVA-created template with vApp properties
</h3>
<p>This alternate example details how to clone a VM from a template that came from
an OVF/OVA file. This leverages the resource&#39;s <a href="#using-vapp-properties-to-supply-ovf-ova-configuration">vApp
properties</a> capabilities to
set appropriate keys that control various configuration settings on the virtual
machine or virtual appliance. In this scenario, using <code>customize</code> is not
recommended as the functionality has tendency to overlap.</p>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Neither the <code>vsphere_virtual_machine</code> resource nor the vSphere
provider supports importing of OVA or OVF files as this is a workflow that is
fundamentally not the domain of Terraform. The supported path for deployment in
Terraform is to first import the virtual machine into a template that has not
been powered on, and then clone from that template. This can be accomplished
with <a href="https://www.packer.io/">Packer</a>, <a href="https://github.com/vmware/govmomi/tree/master/govc">govc</a>&#39;s <code>import.ovf</code> and <code>import.ova</code>
subcommands, or <a href="https://code.vmware.com/web/dp/tool/ovf">ovftool</a>.</p>
</div>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">data</span> <span class="s2">"vsphere_datacenter"</span> <span class="s2">"dc"</span> <span class="p">{</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="s2">"dc1"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_datastore"</span> <span class="s2">"datastore"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"datastore1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_compute_cluster"</span> <span class="s2">"cluster"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"cluster1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_network"</span> <span class="s2">"network"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"public"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"tempate_from_ovf"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"template_from_ovf"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="nb">name</span>             <span class="o">=</span> <span class="s2">"terraform-test"</span>
  <span class="n">resource_pool_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_compute_cluster.cluster.resource_pool_id}"</span>
  <span class="n">datastore_id</span>     <span class="o">=</span> <span class="s2">"${data.vsphere_datastore.datastore.id}"</span>

  <span class="n">num_cpus</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="n">memory</span>   <span class="o">=</span> <span class="mi">1024</span>
  <span class="n">guest_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.guest_id}"</span>

  <span class="n">scsi_type</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.scsi_type}"</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.network.id}"</span>
    <span class="n">adapter_type</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.network_interface_types[0]}"</span>
  <span class="p">}</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="nb">name</span>             <span class="o">=</span> <span class="s2">"disk0"</span>
    <span class="n">size</span>             <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.disks.0.size}"</span>
    <span class="n">eagerly_scrub</span>    <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.disks.0.eagerly_scrub}"</span>
    <span class="n">thin_provisioned</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template.disks.0.thin_provisioned}"</span>
  <span class="p">}</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="n">template_uuid</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template_from_ovf.id}"</span>
  <span class="p">}</span>

  <span class="n">vapp</span> <span class="p">{</span>
    <span class="n">properties</span> <span class="p">{</span>
      <span class="s2">"guestinfo.hostname"</span>                        <span class="o">=</span> <span class="s2">"terraform-test.foobar.local"</span>
      <span class="s2">"guestinfo.interface.0.name"</span>                <span class="o">=</span> <span class="s2">"ens192"</span>
      <span class="s2">"guestinfo.interface.0.ip.0.address"</span>        <span class="o">=</span> <span class="s2">"10.0.0.100/24"</span>
      <span class="s2">"guestinfo.interface.0.route.0.gateway"</span>     <span class="o">=</span> <span class="s2">"10.0.0.1"</span>
      <span class="s2">"guestinfo.interface.0.route.0.destination"</span> <span class="o">=</span> <span class="s2">"0.0.0.0/0"</span>
      <span class="s2">"guestinfo.dns.server.0"</span>                    <span class="o">=</span> <span class="s2">"10.0.0.10"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="using-storage-drs">
  <a name="using-storage-drs" class="anchor" href="#using-storage-drs">&raquo;</a>
  Using Storage DRS
</h3>
<p>The <code>vsphere_virtual_machine</code> resource also supports Storage DRS, allowing the
assignment of virtual machines to datastore clusters. When assigned to a
datastore cluster, changes to a virtual machine&#39;s underlying datastores are
ignored unless disks drift outside of the datastore cluster. The example below
makes use of the <a href="/docs/providers/vsphere/d/datastore_cluster.html"><code>vsphere_datastore_cluster</code> data
source</a>, and the
<a href="#datastore_cluster_id"><code>datastore_cluster_id</code></a> configuration setting. Note
that the <a href="/docs/providers/vsphere/r/datastore_cluster.html"><code>vsphere_datastore_cluster</code>
resource</a> also exists to allow for
management of datastore clusters directly in Terraform.</p>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> When managing datastore clusters, member datastores, and virtual
machines within the same Terraform configuration, race conditions can apply.
This is because datastore clusters must be created before datastores can be
assigned to them, and the respective <code>vsphere_virtual_machine</code> resources will
no longer have an implicit dependency on the specific datastore resources. Use
<a href="/docs/configuration/resources.html#depends_on"><code>depends_on</code></a> to create an explicit dependency on the
datastores in the cluster, or manage datastore clusters and datastores in a
separate configuration.</p>
</div>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">data</span> <span class="s2">"vsphere_datacenter"</span> <span class="s2">"dc"</span> <span class="p">{</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="s2">"dc1"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_datastore_cluster"</span> <span class="s2">"datastore_cluster"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"datastore-cluster1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_compute_cluster"</span> <span class="s2">"cluster"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"cluster1"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="s2">"vsphere_network"</span> <span class="s2">"network"</span> <span class="p">{</span>
  <span class="nb">name</span>          <span class="o">=</span> <span class="s2">"public"</span>
  <span class="n">datacenter_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datacenter.dc.id}"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="nb">name</span>                 <span class="o">=</span> <span class="s2">"terraform-test"</span>
  <span class="n">resource_pool_id</span>     <span class="o">=</span> <span class="s2">"${data.vsphere_compute_cluster.cluster.resource_pool_id}"</span>
  <span class="n">datastore_cluster_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datastore_cluster.datastore_cluster.id}"</span>

  <span class="n">num_cpus</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="n">memory</span>   <span class="o">=</span> <span class="mi">1024</span>
  <span class="n">guest_id</span> <span class="o">=</span> <span class="s2">"other3xLinux64Guest"</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_network.network.id}"</span>
  <span class="p">}</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">"disk0"</span>
    <span class="n">size</span>  <span class="o">=</span> <span class="mi">20</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="argument-reference">
  <a name="argument-reference" class="anchor" href="#argument-reference">&raquo;</a>
  Argument Reference
</h2>
<p>The following arguments are supported:</p>
<h3 id="general-options">
  <a name="general-options" class="anchor" href="#general-options">&raquo;</a>
  General options
</h3>
<p>The following options are general virtual machine and Terraform workflow
options:</p>

<ul>
<li><a name="name" /><a href="#name"><code>name</code></a> - (Required) The name of the virtual machine.
</li>
<li><a name="resource_pool_id" /><a href="#resource_pool_id"><code>resource_pool_id</code></a> - (Required) The <a href="/docs/providers/vsphere/index.html#use-of-managed-object-references-by-the-vsphere-provider">managed object reference
ID</a> of the resource pool to put this virtual machine in.
See the section on <a href="#virtual-machine-migration">virtual machine migration</a>
for details on changing this value.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> All clusters and standalone hosts have a resource pool, even if
one has not been explicitly created. For more information, see the section on
<a href="/docs/providers/vsphere/d/resource_pool.html#specifying-the-root-resource-pool-for-a-standalone-host">specifying the root resource pool </a> in the
<code>vsphere_resource_pool</code> data source documentation. This resource does not take
a cluster or standalone host resource directly.</p>
</div>

<ul>
<li><a name="datastore_id" /><a href="#datastore_id"><code>datastore_id</code></a> - (Optional) The <a href="/docs/providers/vsphere/index.html#use-of-managed-object-references-by-the-vsphere-provider">managed object reference
ID</a> of the virtual machine&#39;s datastore. The virtual
machine configuration is placed here, along with any virtual disks that are
created where a datastore is not explicitly specified. See the section on
<a href="#virtual-machine-migration">virtual machine migration</a> for details on
changing this value.
</li>
<li><a name="datastore_cluster_id" /><a href="#datastore_cluster_id"><code>datastore_cluster_id</code></a> - (Optional) The <a href="/docs/providers/vsphere/index.html#use-of-managed-object-references-by-the-vsphere-provider">managed object reference
ID</a> of the datastore cluster ID to use. This setting
applies to entire virtual machine and implies that you wish to use Storage
DRS with this virtual machine. See the section on <a href="#virtual-machine-migration">virtual machine
migration</a> for details on changing this value.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> One of <code>datastore_id</code> or <code>datastore_cluster_id</code> must be specified.</p>
</div>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Use of <code>datastore_cluster_id</code> requires Storage DRS to be enabled
on that cluster.</p>
</div>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> The <code>datastore_cluster_id</code> setting applies to the entire virtual
machine - you cannot assign individual datastore clusters to individual disks.
In addition to this, you cannot use the <a href="#attach"><code>attach</code></a> setting to attach
external disks on virtual machines that are assigned to datastore clusters.</p>
</div>

<ul>
<li><a name="folder" /><a href="#folder"><code>folder</code></a> - (Optional) The path to the folder to put this virtual machine in,
relative to the datacenter that the resource pool is in.
</li>
<li><a name="host_system_id" /><a href="#host_system_id"><code>host_system_id</code></a> - (Optional) An optional <a href="/docs/providers/vsphere/index.html#use-of-managed-object-references-by-the-vsphere-provider">managed object reference
ID</a> of a host to put this virtual machine on. See the
section on <a href="#virtual-machine-migration">virtual machine migration</a> for
details on changing this value. If a <code>host_system_id</code> is not supplied,
vSphere will select a host in the resource pool to place the virtual machine,
according to any defaults or DRS policies in place. 
</li>
<li><a name="disk" /><a href="#disk"><code>disk</code></a> - (Required) A specification for a virtual disk device on this virtual
machine. See <a href="#disk-options">disk options</a> below.
</li>
<li><a name="network_interface" /><a href="#network_interface"><code>network_interface</code></a> - (Required) A specification for a virtual NIC on this
virtual machine. See <a href="#network-interface-options">network interface options</a>
below.
</li>
<li><a name="cdrom" /><a href="#cdrom"><code>cdrom</code></a> - (Optional) A specification for a CDROM device on this virtual
machine. See <a href="#cdrom-options">CDROM options</a> below.
</li>
<li><a name="clone" /><a href="#clone"><code>clone</code></a> - (Optional) When specified, the VM will be created as a clone of a
specified template. Optional customization options can be submitted as well.
See <a href="#creating-a-virtual-machine-from-a-template">creating a virtual machine from a
template</a> for more details.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Cloning requires vCenter and is not supported on direct ESXi
connections.</p>
</div>

<ul>
<li><a name="vapp" /><a href="#vapp"><code>vapp</code></a> - (Optional) Optional vApp configuration. The only sub-key available
is <code>properties</code>, which is a key/value map of properties for virtual machines
imported from OVF or OVA files. See <a href="#using-vapp-properties-to-supply-ovf-ova-configuration">Using vApp properties to supply OVF/OVA
configuration</a> for
more details.
</li>
<li><p><a name="guest_id" /><a href="#guest_id"><code>guest_id</code></a> - (Optional) The guest ID for the operating system type. For a
full list of possible values, see <a href="https://pubs.vmware.com/vsphere-6-5/topic/com.vmware.wssdk.apiref.doc/vim.vm.GuestOsDescriptor.GuestOsIdentifier.html">here</a>. Default: <code>other-64</code>.</p>
</li>
<li><p><a name="alternate_guest_name" /><a href="#alternate_guest_name"><code>alternate_guest_name</code></a> - (Optional) The guest name for the operating system
when <code>guest_id</code> is <code>other</code> or <code>other-64</code>.</p>
</li>
<li><p><a name="annotation" /><a href="#annotation"><code>annotation</code></a> - (Optional) A user-provided description of the virtual machine.
The default is no annotation.</p>
</li>
<li><p><a name="firmware" /><a href="#firmware"><code>firmware</code></a> - (Optional) The firmware interface to use on the virtual machine.
Can be one of <code>bios</code> or <code>EFI</code>. Default: <code>bios</code>.</p>
</li>
<li><p><a name="extra_config" /><a href="#extra_config"><code>extra_config</code></a> - (Optional) Extra configuration data for this virtual
machine. Can be used to supply advanced parameters not normally in
configuration, such as data for cloud-config (under the guestinfo namespace).</p>
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Do not use <code>extra_config</code> when working with a template imported
from OVF or OVA as more than likely your settings will be ignored. Use the
<code>vapp</code> block&#39;s <code>properties</code> section as outlined in <a href="#using-vapp-properties-to-supply-ovf-ova-configuration">Using vApp properties to
supply OVF/OVA
configuration</a>.</p>
</div>

<ul>
<li><a name="scsi_type" /><a href="#scsi_type"><code>scsi_type</code></a> - (Optional) The type of SCSI bus this virtual machine will have.
Can be one of lsilogic (LSI Logic Parallel), lsilogic-sas (LSI Logic SAS) or
pvscsi (VMware Paravirtual). Defualt: <code>pvscsi</code>.
</li>
<li><a name="scsi_bus_sharing" /><a href="#scsi_bus_sharing"><code>scsi_bus_sharing</code></a> - (Optional) Mode for sharing the SCSI bus. The modes are
physicalSharing, virtualSharing, and noSharing. Default: <code>noSharing</code>.
</li>
<li><a name="tags" /><a href="#tags"><code>tags</code></a> - (Optional) The IDs of any tags to attach to this resource. See
<a href="/docs/providers/vsphere/r/tag.html#using-tags-in-a-supported-resource">here</a> for a reference on how to apply tags.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Tagging support is unsupported on direct ESXi connections and
requires vCenter 6.0 or higher.</p>
</div>

<ul>
<li><a name="custom_attributes" /><a href="#custom_attributes"><code>custom_attributes</code></a> - (Optional) Map of custom attribute ids to attribute
value strings to set for virtual machine. See 
<a href="/docs/providers/vsphere/r/custom_attribute.html#using-custom-attributes-in-a-supported-resource">here</a> for a reference on how to set values 
for custom attributes.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Custom attributes are unsupported on direct ESXi connections 
and require vCenter.</p>
</div>
<h3 id="cpu-and-memory-options">
  <a name="cpu-and-memory-options" class="anchor" href="#cpu-and-memory-options">&raquo;</a>
  CPU and memory options
</h3>
<p>The following options control CPU and memory settings on the virtual machine:</p>

<ul>
<li><a name="num_cpus" /><a href="#num_cpus"><code>num_cpus</code></a> - (Optional) The number of virtual processors to assign to this
virtual machine. Default: <code>1</code>.
</li>
<li><a name="num_cores_per_socket" /><a href="#num_cores_per_socket"><code>num_cores_per_socket</code></a> - (Optional) The number of cores to distribute among
the CPUs in this virtual machine. If specified, the value supplied to
<code>num_cpus</code> must be evenly divisible by this value. Default: <code>1</code>.
</li>
<li><a name="cpu_hot_add_enabled" /><a href="#cpu_hot_add_enabled"><code>cpu_hot_add_enabled</code></a> - (Optional) Allow CPUs to be added to this virtual
machine while it is running.
</li>
<li><a name="cpu_hot_remove_enabled" /><a href="#cpu_hot_remove_enabled"><code>cpu_hot_remove_enabled</code></a> - (Optional) Allow CPUs to be removed to this
virtual machine while it is running.
</li>
<li><a name="memory" /><a href="#memory"><code>memory</code></a> - (Optional) The size of the virtual machine&#39;s memory, in MB.
Default: <code>1024</code> (1 GB).
</li>
<li><a name="memory_hot_add_enabled" /><a href="#memory_hot_add_enabled"><code>memory_hot_add_enabled</code></a> - (Optional) Allow memory to be added to this
virtual machine while it is running.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Certain CPU and memory hot-plug options are not available on every
operating system. Check the <a href="http://partnerweb.vmware.com/comp_guide2/pdf/VMware_GOS_Compatibility_Guide.pdf">VMware Guest OS Compatibility
Guide</a> first to see what settings your guest
operating system is eligible for. In addition, at least one <code>terraform apply</code>
must be executed before being able to take advantage of CPU and memory hot-plug
settings, so if you want the support, enable it as soon as possible.</p>
</div>
<h3 id="boot-options">
  <a name="boot-options" class="anchor" href="#boot-options">&raquo;</a>
  Boot options
</h3>
<p>The following options control boot settings on the virtual machine:</p>

<ul>
<li><a name="boot_delay" /><a href="#boot_delay"><code>boot_delay</code></a> - (Optional) The number of milliseconds to wait before starting
the boot sequence. The default is no delay.
</li>
<li><a name="efi_secure_boot_enabled" /><a href="#efi_secure_boot_enabled"><code>efi_secure_boot_enabled</code></a> - (Optional) When the <code>firmware</code> type is set to is
<code>efi</code>, this enables EFI secure boot. Default: <code>false</code>.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> EFI secure boot is only available on vSphere 6.5 and higher.</p>
</div>

<ul>
<li><a name="boot_retry_delay" /><a href="#boot_retry_delay"><code>boot_retry_delay</code></a> - (Optional) The number of milliseconds to wait before
retrying the boot sequence. This only valid if <code>boot_retry_enabled</code> is true.
Default: <code>10000</code> (10 seconds).
</li>
<li><a name="boot_retry_enabled" /><a href="#boot_retry_enabled"><code>boot_retry_enabled</code></a> - (Optional) If set to true, a virtual machine that
fails to boot will try again after the delay defined in <code>boot_retry_delay</code>.
Default: <code>false</code>.
</li>
</ul>
<h3 id="vmware-tools-options">
  <a name="vmware-tools-options" class="anchor" href="#vmware-tools-options">&raquo;</a>
  VMware Tools options
</h3>
<p>The following options control VMware tools options on the virtual machine:</p>

<ul>
<li><a name="sync_time_with_host" /><a href="#sync_time_with_host"><code>sync_time_with_host</code></a> - (Optional) Enable guest clock synchronization with
the host. Requires VMware tools to be installed. Default: <code>false</code>.
</li>
<li><a name="run_tools_scripts_after_power_on" /><a href="#run_tools_scripts_after_power_on"><code>run_tools_scripts_after_power_on</code></a> - (Optional) Enable the execution of
post-power-on scripts when VMware tools is installed. Default: <code>true</code>.
</li>
<li><a name="run_tools_scripts_after_resume" /><a href="#run_tools_scripts_after_resume"><code>run_tools_scripts_after_resume</code></a> - (Optional) Enable the execution of
post-resume scripts when VMware tools is installed. Default: <code>true</code>.
</li>
<li><a name="run_tools_scripts_before_guest_reboot" /><a href="#run_tools_scripts_before_guest_reboot"><code>run_tools_scripts_before_guest_reboot</code></a> - (Optional) Enable the execution of
pre-reboot scripts when VMware tools is installed. Default: <code>false</code>.
</li>
<li><a name="run_tools_scripts_before_guest_shutdown" /><a href="#run_tools_scripts_before_guest_shutdown"><code>run_tools_scripts_before_guest_shutdown</code></a> - (Optional) Enable the execution
of pre-shutdown scripts when VMware tools is installed. Default: <code>true</code>.
</li>
<li><a name="run_tools_scripts_before_guest_standby" /><a href="#run_tools_scripts_before_guest_standby"><code>run_tools_scripts_before_guest_standby</code></a> - (Optional) Enable the execution of
pre-standby scripts when VMware tools is installed. Default: <code>true</code>.
</li>
</ul>
<h3 id="resource-allocation-options">
  <a name="resource-allocation-options" class="anchor" href="#resource-allocation-options">&raquo;</a>
  Resource allocation options
</h3>
<p>The following options allow control over CPU and memory allocation on the
virtual machine. Note that the resource pool that this VM is in may affect
these options.</p>

<ul>
<li><a name="cpu_limit" /><a href="#cpu_limit"><code>cpu_limit</code></a> - (Optional) The maximum amount of CPU (in MHz) that this virtual
machine can consume, regardless of available resources. The default is no
limit.
</li>
<li><a name="cpu_reservation" /><a href="#cpu_reservation"><code>cpu_reservation</code></a> - (Optional) The amount of CPU (in MHz) that this virtual
machine is guaranteed. The default is no reservation.
</li>
<li><a name="cpu_share_level" /><a href="#cpu_share_level"><code>cpu_share_level</code></a> - (Optional) The allocation level for CPU resources. Can be
one of <code>high</code>, <code>low</code>, <code>normal</code>, or <code>custom</code>. Default: <code>custom</code>.
</li>
<li><a name="cpu_share_count" /><a href="#cpu_share_count"><code>cpu_share_count</code></a> - (Optional) The number of CPU shares allocated to the
virtual machine when the <code>cpu_share_level</code> is <code>custom</code>.
</li>
<li><a name="memory_limit" /><a href="#memory_limit"><code>memory_limit</code></a> - (Optional) The maximum amount of memory (in MB) that this
virtual machine can consume, regardless of available resources. The default
is no limit.
</li>
<li><a name="memory_reservation" /><a href="#memory_reservation"><code>memory_reservation</code></a> - (Optional) The amount of memory (in MB) that this
virtual machine is guaranteed. The default is no reservation.
</li>
<li><a name="memory_share_level" /><a href="#memory_share_level"><code>memory_share_level</code></a> - (Optional) The allocation level for memory resources.
Can be one of <code>high</code>, <code>low</code>, <code>normal</code>, or <code>custom</code>. Default: <code>custom</code>.
</li>
<li><a name="memory_share_count" /><a href="#memory_share_count"><code>memory_share_count</code></a> - (Optional) The number of memory shares allocated to
the virtual machine when the <code>memory_share_level</code> is <code>custom</code>.
</li>
</ul>
<h3 id="advanced-options">
  <a name="advanced-options" class="anchor" href="#advanced-options">&raquo;</a>
  Advanced options
</h3>
<p>The following options control advanced operation of the virtual machine, or
control various parts of Terraform workflow, and should not need to be modified
during basic operation of the resource. Only change these options if they are
explicitly required, or if you are having trouble with Terraform&#39;s default
behavior.</p>

<ul>
<li><a name="enable_disk_uuid" /><a href="#enable_disk_uuid"><code>enable_disk_uuid</code></a> - (Optional) Expose the UUIDs of attached virtual disks to
the virtual machine, allowing access to them in the guest. Default: <code>false</code>.
</li>
<li><a name="hv_mode" /><a href="#hv_mode"><code>hv_mode</code></a> - (Optional) The (non-nested) hardware virtualization setting for
this virtual machine. Can be one of <code>hvAuto</code>, <code>hvOn</code>, or <code>hvOff</code>. Default:
<code>hvAuto</code>.
</li>
<li><a name="ept_rvi_mode" /><a href="#ept_rvi_mode"><code>ept_rvi_mode</code></a> - (Optional) The EPT/RVI (hardware memory virtualization)
setting for this virtual machine. Can be one of <code>automatic</code>, <code>on</code>, or <code>off</code>.
Default: <code>automatic</code>.
</li>
<li><a name="nested_hv_enabled" /><a href="#nested_hv_enabled"><code>nested_hv_enabled</code></a> - (Optional) Enable nested hardware virtualization on
this virtual machine, facilitating nested virtualization in the guest.
Default: <code>false</code>.
</li>
<li><a name="enable_logging" /><a href="#enable_logging"><code>enable_logging</code></a> - (Optional) Enable logging of virtual machine events to a
log file stored in the virtual machine directory. Default: <code>false</code>.
</li>
<li><a name="cpu_performance_counters_enabled" /><a href="#cpu_performance_counters_enabled"><code>cpu_performance_counters_enabled</code></a> - (Optional) Enable CPU performance
counters on this virtual machine. Default: <code>false</code>.
</li>
<li><a name="swap_placement_policy" /><a href="#swap_placement_policy"><code>swap_placement_policy</code></a> - (Optional) The swap file placement policy for this
virtual machine. Can be one of <code>inherit</code>, <code>hostLocal</code>, or <code>vmDirectory</code>.
Default: <code>inherit</code>.
</li>
<li><a name="latency_sensitivity" /><a href="#latency_sensitivity"><code>latency_sensitivity</code></a> - (Optional) Controls the scheduling delay of the
virtual machine. Use a higher sensitivity for applications that require lower
latency, such as VOIP, media player applications, or applications that
require frequent access to mouse or keyboard devices. Can be one of <code>low</code>,
<code>normal</code>, <code>medium</code>, or <code>high</code>.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Do not use a <code>latency_sensitivity</code> setting of <code>low</code> or <code>medium</code> on
hosts running ESXi 6.0 or older. Doing so may result in virtual machine startup
issues or spurious diffs in Terraform. In addition, on higher sensitivities,
you may have to adjust <a href="#memory_reservation"><code>memory_reservation</code></a> to the full
amount of memory provisioned for the virtual machine.</p>
</div>

<ul>
<li><a name="wait_for_guest_net_timeout" /><a href="#wait_for_guest_net_timeout"><code>wait_for_guest_net_timeout</code></a> - (Optional) The amount of time, in minutes, to
wait for an available IP address on this virtual machine. A value less than 1
disables the waiter. Default: 5 minutes.
</li>
<li><a name="wait_for_guest_net_routable" /><a href="#wait_for_guest_net_routable"><code>wait_for_guest_net_routable</code></a> - (Optional) Controls whether or not the guest
network waiter waits for a routable address. When <code>false</code>, the waiter does
not wait for a default gateway, nor are IP addresses checked against any
discovered default gateways as part of its success criteria. Default: <code>true</code>.
</li>
<li><a name="shutdown_wait_timeout" /><a href="#shutdown_wait_timeout"><code>shutdown_wait_timeout</code></a> - (Optional) The amount of time, in minutes, to wait
for a graceful guest shutdown when making necessary updates to the virtual
machine. If <code>force_power_off</code> is set to true, the VM will be force powered-off
after this timeout, otherwise an error is returned. Default: 3 minutes.
</li>
<li><a name="migrate_wait_timeout" /><a href="#migrate_wait_timeout"><code>migrate_wait_timeout</code></a> - (Optional) The amount of time, in minutes, to wait
for a virtual machine migration to complete before failing. Default: 10
minutes. Also see the section on <a href="#virtual-machine-migration">virtual machine
migration</a>.
</li>
<li><a name="force_power_off" /><a href="#force_power_off"><code>force_power_off</code></a> - (Optional) If a guest shutdown failed or timed out while
updating or destroying (see
<a href="#shutdown_wait_timeout"><code>shutdown_wait_timeout</code></a>), force the power-off of
the virtual machine. Default: <code>true</code>.
</li>
<li><a name="scsi_controller_count" /><a href="#scsi_controller_count"><code>scsi_controller_count</code></a> - (Optional) The number of SCSI controllers that
Terraform manages on this virtual machine. This directly affects the amount
of disks you can add to the virtual machine and the maximum disk unit number.
Note that lowering this value does not remove controllers. Default: <code>1</code>.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> <code>scsi_controller_count</code> should only be modified when you will need
more than 15 disks on a single virtual machine, or in rare cases that require a
dedicated controller for certain disks. HashiCorp does not support exploiting
this value to add out-of-band devices.</p>
</div>
<h3 id="disk-options">
  <a name="disk-options" class="anchor" href="#disk-options">&raquo;</a>
  Disk options
</h3>
<p>Virtual disks are managed by adding an instance of the <code>disk</code> block.</p>
<p>At the very least, there must be <code>name</code> and <code>size</code> attributes. <code>unit_number</code> is
required for any disk other than the first, and there must be at least one
resource with the implicit number of 0.</p>
<p>An abridged multi-disk example is below:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">"disk0"</span>
    <span class="n">size</span>  <span class="o">=</span> <span class="s2">"10"</span>
  <span class="p">}</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="n">label</span>       <span class="o">=</span> <span class="s2">"disk1"</span>
    <span class="n">size</span>        <span class="o">=</span> <span class="s2">"100"</span>
    <span class="n">unit_number</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="p">}</span>

  <span class="o">...</span>
<span class="p">}</span>
</code></pre></div><p>The options are:</p>

<ul>
<li><a name="label" /><a href="#label"><code>label</code></a> - (Required) A label for the disk. Forces a new disk if changed.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> It&#39;s recommended that you set the disk label to a format matching
<code>diskN</code>, where <code>N</code> is the number of the disk, starting from disk number 0. This
will ensure that your configuration is compatible when importing a virtual
machine. For more information, see the section on <a href="#importing">importing</a>.</p>
</div>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Do not choose a label that starts with <code>orphaned_disk_</code> (example:
<code>orphaned_disk_0</code>), as this prefix is reserved for disks that Terraform does
not recognize, such as disks that are attached externally. Terraform will issue
an error if you try to label a disk with this prefix.</p>
</div>

<ul>
<li><a name="name-1" /><a href="#name-1"><code>name</code></a> - (Optional) An alias for both <code>label</code> and <code>path</code>, the latter when
using <code>attach</code>. Required if not using <code>label</code>.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> This parameter has been deprecated and will be removed in future
versions of the vSphere provider. You cannot use <code>name</code> on a disk that has
previously had a <code>label</code>, and using this argument is not recommend for new
configurations.</p>
</div>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> In previous versions of the vSphere provider this argument
controlled file names for non-attached disks - this behavior has now been
removed, and the only time this controls path is when attaching a disk
externally with <code>attach</code> when the <code>path</code> field is not specified.</p>
</div>

<ul>
<li><a name="size" /><a href="#size"><code>size</code></a> - (Required) The size of the disk, in GiB.
</li>
<li><a name="unit_number" /><a href="#unit_number"><code>unit_number</code></a> - (Optional) The disk number on the SCSI bus. The maximum value
for this setting is the value of
<a href="#scsi_controller_count"><code>scsi_controller_count</code></a> times 15, minus 1 (so <code>14</code>,
<code>29</code>, <code>44</code>, and <code>59</code>, for 1-4 controllers respectively). The default is <code>0</code>,
for which one disk must be set to. Duplicate unit numbers are not allowed.
</li>
<li><a name="datastore_id-1" /><a href="#datastore_id-1"><code>datastore_id</code></a> - (Optional) A <a href="/docs/providers/vsphere/index.html#use-of-managed-object-references-by-the-vsphere-provider">managed object reference
ID</a> to the datastore for this virtual disk. The default is
to use the datastore of the virtual machine. See the section on <a href="#virtual-machine-migration">virtual
machine migration</a> for details on changing this
value.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Datastores cannot be assigned to individual disks when
<a href="#datastore_cluster_id"><code>datastore_cluster_id</code></a> is in use.</p>
</div>

<ul>
<li><a name="attach" /><a href="#attach"><code>attach</code></a> - (Optional) Attach an external disk instead of creating a new one.
Implies and conflicts with <code>keep_on_remove</code>. If set, you cannot set <code>size</code>,
<code>eagerly_scrub</code>, or <code>thin_provisioned</code>. Must set <code>path</code> if used.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> External disks cannot be attached when
<a href="#datastore_cluster_id"><code>datastore_cluster_id</code></a> is in use.</p>
</div>

<ul>
<li><a name="path" /><a href="#path"><code>path</code></a> - (Optional) When using <code>attach</code>, this parameter controls the path of
a virtual disk to attach externally. Otherwise, it is a computed attribute
that contains the virtual disk&#39;s current filename.
</li>
<li><a name="keep_on_remove" /><a href="#keep_on_remove"><code>keep_on_remove</code></a> - (Optional) Keep this disk when removing the device or
destroying the virtual machine. Default: <code>false</code>.
</li>
<li><p><a name="disk_mode" /><a href="#disk_mode"><code>disk_mode</code></a> - (Optional) The mode of this this virtual disk for purposes of
writes and snapshotting. Can be one of <code>append</code>, <code>independent_nonpersistent</code>,
<code>independent_persistent</code>, <code>nonpersistent</code>, <code>persistent</code>, or <code>undoable</code>.
Default: <code>persistent</code>. For an explanation of options, click
<a href="https://pubs.vmware.com/vsphere-6-5/topic/com.vmware.wssdk.apiref.doc/vim.vm.device.VirtualDiskOption.DiskMode.html">here</a>.</p>
</li>
<li><p><a name="eagerly_scrub" /><a href="#eagerly_scrub"><code>eagerly_scrub</code></a> - (Optional) If set to <code>true</code>, the disk space is zeroed out
on VM creation. This will delay the creation of the disk or virtual machine.
Cannot be set to <code>true</code> when <code>thin_provisioned</code> is <code>true</code>.  See the section
on <a href="#picking-a-disk-type">picking a disk type</a>.  Default: <code>false</code>.</p>
</li>
<li><p><a name="thin_provisioned" /><a href="#thin_provisioned"><code>thin_provisioned</code></a> - (Optional) If <code>true</code>, this disk is thin provisioned,
with space for the file being allocated on an as-needed basis. Cannot be set
to <code>true</code> when <code>eagerly_scrub</code> is <code>true</code>. See the section on <a href="#picking-a-disk-type">picking a disk
type</a>. Default: <code>true</code>.</p>
</li>
<li><p><a name="disk_sharing" /><a href="#disk_sharing"><code>disk_sharing</code></a> - (Optional) The sharing mode of this virtual disk. Can be one
of <code>sharingMultiWriter</code> or <code>sharingNone</code>. Default: <code>sharingNone</code>.</p>
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Disk sharing is only available on vSphere 6.0 and higher.</p>
</div>

<ul>
<li><a name="write_through" /><a href="#write_through"><code>write_through</code></a> - (Optional) If <code>true</code>, writes for this disk are sent
directly to the filesystem immediately instead of being buffered. Default:
<code>false</code>.
</li>
<li><a name="io_limit" /><a href="#io_limit"><code>io_limit</code></a> - (Optional) The upper limit of IOPS that this disk can use. The
default is no limit.
</li>
<li><a name="io_reservation" /><a href="#io_reservation"><code>io_reservation</code></a> - (Optional) The I/O reservation (guarantee) that this disk
has, in IOPS.  The default is no reservation.
</li>
<li><a name="io_share_level" /><a href="#io_share_level"><code>io_share_level</code></a> - (Optional) The share allocation level for this disk. Can
be one of <code>low</code>, <code>normal</code>, <code>high</code>, or <code>custom</code>. Default: <code>normal</code>.
</li>
<li><a name="io_share_count" /><a href="#io_share_count"><code>io_share_count</code></a> - (Optional) The share count for this disk when the share
level is <code>custom</code>.
</li>
</ul>
<h4 id="computed-disk-attributes">
  <a name="computed-disk-attributes" class="anchor" href="#computed-disk-attributes">&raquo;</a>
  Computed disk attributes
</h4>

<ul>
<li><a name="uuid" /><a href="#uuid"><code>uuid</code></a> - The UUID of the virtual disk&#39;s VMDK file. This is used to track the
virtual disk on the virtual machine.
</li>
</ul>
<h4 id="picking-a-disk-type">
  <a name="picking-a-disk-type" class="anchor" href="#picking-a-disk-type">&raquo;</a>
  Picking a disk type
</h4>
<p>The <code>eagerly_scrub</code> and <code>thin_provisioned</code> options control the space allocation
type of a virtual disk. These show up in the vSphere console as a unified
enumeration of options, the equivalents of which are explained below. The
defaults in Terraform are the equivalent of thin provisioning.</p>

<ul>
<li><strong>Thick provisioned lazy zeroed:</strong> Both <code>eagerly_scrub</code> and
<code>thin_provisioned</code> should be set to <code>false</code>.
</li>
<li><strong>Thick provisioned eager zeroed:</strong> <code>eagerly_scrub</code> should be set to true,
and <code>thin_provisioned</code> should be set to <code>false</code>.
</li>
<li><strong>Thin provisioned:</strong> <code>eagerly_scrub</code> should be set to <code>false</code>, and
<code>thin_provisioned</code> should be set to <code>true</code>.
</li>
</ul>
<p>For the technical details of each virtual disk provisioning policy, click
<a href="https://docs.vmware.com/en/VMware-vSphere/6.5/com.vmware.vsphere.vm_admin.doc/GUID-4C0F4D73-82F2-4B81-8AA7-1DD752A8A5AC.html">here</a>.</p>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Not all disk types are available on some types of datastores.
Attempting to set options inappropriate for a datastore that a disk is deployed
to will result in a successful initial apply, but vSphere will silently correct
the options, and subsequent plans will fail with an appropriate error message
until the settings are corrected.</p>
</div>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> The disk type cannot be changed once set.</p>
</div>
<h3 id="network-interface-options">
  <a name="network-interface-options" class="anchor" href="#network-interface-options">&raquo;</a>
  Network interface options
</h3>
<p>Network interfaces are managed by adding an instance of the <code>network_interface</code>
block.</p>
<p>Interfaces are assigned to devices in the specific order they are declared.
This has different implications for different operating systems.</p>
<p>Given the following example:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.public.id}"</span>
  <span class="p">}</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.private.id}"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>The first interface with the <code>public</code> network assigned to it would show up in
order before the interface assigned to <code>private</code>. On some Linux systems, this
might mean that the first interface would show up as <code>eth0</code> and the second
would show up as <code>eth1</code>.</p>
<p>The options are:</p>

<ul>
<li><a name="network_id" /><a href="#network_id"><code>network_id</code></a> - (Required) The <a href="/docs/providers/vsphere/index.html#use-of-managed-object-references-by-the-vsphere-provider">managed object reference
ID</a> of the network to connect this interface to.
</li>
<li><a name="adapter_type" /><a href="#adapter_type"><code>adapter_type</code></a> - (Optional) The network interface type. Can be one of
<code>e1000</code>, <code>e1000e</code>, or <code>vmxnet3</code>. Default: <code>vmxnet3</code>.
</li>
<li><a name="use_static_mac" /><a href="#use_static_mac"><code>use_static_mac</code></a> - (Optional) If true, the <code>mac_address</code> field is treated as
a static MAC address and set accordingly. Setting this to <code>true</code> requires
<code>mac_address</code> to be set. Default: <code>false</code>.
</li>
<li><a name="mac_address" /><a href="#mac_address"><code>mac_address</code></a> - (Optional) The MAC address of this network interface. Can
only be manually set if <code>use_static_mac</code> is true, otherwise this is a
computed value that gives the current MAC address of this interface.
</li>
<li><a name="bandwidth_limit" /><a href="#bandwidth_limit"><code>bandwidth_limit</code></a> - (Optional) The upper bandwidth limit of this network
interface, in Mbits/sec. The default is no limit.
</li>
<li><a name="bandwidth_reservation" /><a href="#bandwidth_reservation"><code>bandwidth_reservation</code></a> - (Optional) The bandwidth reservation of this
network interface, in Mbits/sec. The default is no reservation.
</li>
<li><a name="bandwidth_share_level" /><a href="#bandwidth_share_level"><code>bandwidth_share_level</code></a> - (Optional) The bandwidth share allocation level for
this interface. Can be one of <code>low</code>, <code>normal</code>, <code>high</code>, or <code>custom</code>. Default:
<code>normal</code>.
</li>
<li><a name="bandwidth_share_count" /><a href="#bandwidth_share_count"><code>bandwidth_share_count</code></a> - (Optional) The share count for this network
interface when the share level is <code>custom</code>.
</li>
</ul>
<h3 id="cdrom-options">
  <a name="cdrom-options" class="anchor" href="#cdrom-options">&raquo;</a>
  CDROM options
</h3>
<p>A single virtual CDROM device can be created and attached to the virtual
machine. The resource supports attaching a CDROM from a datastore ISO or
using a remote client device.</p>
<p>An example is below:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="n">cdrom</span> <span class="p">{</span>
    <span class="n">datastore_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datastore.iso_datastore.id}"</span>
    <span class="n">path</span>         <span class="o">=</span> <span class="s2">"ISOs/os-livecd.iso"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>The options are:</p>

<ul>
<li><a name="client_device" /><a href="#client_device"><code>client_device</code></a> - (Optional) Indicates whether the device should be backed by
remote client device. Conflicts with <code>datastore_id</code> and <code>path</code>.
</li>
<li><a name="datastore_id-2" /><a href="#datastore_id-2"><code>datastore_id</code></a> - (Optional) The datastore ID that the ISO is located in.
Requried for using a datastore ISO. Conflicts with <code>client_device</code>.
</li>
<li><a name="path-1" /><a href="#path-1"><code>path</code></a> - (Optional) The path to the ISO file. Requried for using a datastore
ISO. Conflicts with <code>client_device</code>.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Either <code>client_device</code> (for a remote backed CDROM) or <code>datastore_id</code>
and path (for a datastore ISO backed CDROM) are required.</p>
</div>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Some CDROM drive types are currently unsupported by this resource,
such as pass-through devices. If these drives are present in a cloned template,
or added outside of Terraform, they will have their configurations corrected to
that of the defined device, or removed if no <code>cdrom</code> block is present.</p>
</div>
<h3 id="virtual-device-computed-options">
  <a name="virtual-device-computed-options" class="anchor" href="#virtual-device-computed-options">&raquo;</a>
  Virtual device computed options
</h3>
<p>Configured virtual devices (<code>disk</code>, <code>network_interface</code>, and <code>cdrom</code>) all
export the following attributes. These options help locate the device on future
Terraform runs. The options are:</p>

<ul>
<li><a name="key" /><a href="#key"><code>key</code></a> - The ID of the device within the virtual machine.
</li>
<li><a name="device_address" /><a href="#device_address"><code>device_address</code></a> - An address internal to Terraform that helps locate the
device when <code>key</code> is unavailable. This follows a convention of
<code>CONTROLLER_TYPE:BUS_NUMBER:UNIT_NUMBER</code>. Example: <code>scsi:0:1</code> means device
unit 1 on SCSI bus 0.
</li>
</ul>
<h2 id="creating-a-virtual-machine-from-a-template">
  <a name="creating-a-virtual-machine-from-a-template" class="anchor" href="#creating-a-virtual-machine-from-a-template">&raquo;</a>
  Creating a Virtual Machine from a Template
</h2>
<p>The <code>clone</code> block can be used to create a new virtual machine from an existing
virtual machine or template. The resource supports both making a complete copy
of a virtual machine, or cloning from a snapshot (otherwise known as a linked
clone).</p>
<p>See the <a href="#cloning-and-customization-example">cloning and customization
example</a> for a usage synopsis.</p>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Changing any option in <code>clone</code> after creation forces a new
resource.</p>
</div>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Cloning requires vCenter and is not supported on direct ESXi
connections.</p>
</div>
<p>The options available in the <code>clone</code> block are:</p>

<ul>
<li><a name="template_uuid" /><a href="#template_uuid"><code>template_uuid</code></a> - (Required) The UUID of the source virtual machine or
template.
</li>
<li><a name="linked_clone" /><a href="#linked_clone"><code>linked_clone</code></a> - (Optional) Clone this virtual machine from a snapshot.
Templates must have a single snapshot only in order to be eligible. Default:
<code>false</code>.
</li>
<li><a name="timeout" /><a href="#timeout"><code>timeout</code></a> - (Optional) The timeout, in minutes, to wait for the virtual
machine clone to complete. Default: 30 minutes.
</li>
<li><a name="customize" /><a href="#customize"><code>customize</code></a> - (Optional) The customization spec for this clone. This allows
the user to configure the virtual machine post-clone. For more details, see
<a href="#virtual-machine-customization">virtual machine customization</a>.
</li>
</ul>
<h3 id="virtual-machine-customization">
  <a name="virtual-machine-customization" class="anchor" href="#virtual-machine-customization">&raquo;</a>
  Virtual machine customization
</h3>
<p>As part of the <code>clone</code> operation, a virtual machine can be
<a href="https://docs.vmware.com/en/VMware-vSphere/6.5/com.vmware.vsphere.vm_admin.doc/GUID-58E346FF-83AE-42B8-BE58-253641D257BC.html">customized</a> to configure host, network, or licensing
settings.</p>
<p>To perform virtual machine customization as a part of the clone process,
specify the <code>customize</code> block with the respective customization options, nested
within the <code>clone</code> block. See the <a href="#cloning-and-customization-example">cloning and customization
example</a> for a usage synopsis.</p>
<p>The settings for <code>customize</code> are as follows:</p>
<h4 id="customization-timeout-settings">
  <a name="customization-timeout-settings" class="anchor" href="#customization-timeout-settings">&raquo;</a>
  Customization timeout settings
</h4>

<ul>
<li><a name="timeout-1" /><a href="#timeout-1"><code>timeout</code></a> - (Optional) The time, in minutes that Terraform waits for
customization to complete before failing. The default is 10 minutes, and
setting the value to 0 or a negative value disables the waiter altogether.
</li>
</ul>
<h4 id="network-interface-settings">
  <a name="network-interface-settings" class="anchor" href="#network-interface-settings">&raquo;</a>
  Network interface settings
</h4>
<p>These settings, which should be specified in nested <code>network_interface</code> blocks
within <a href="#virtual-machine-customization"><code>customize</code></a>, configure network
interfaces on a per-interface basis and are matched up to
<a href="#network-interface-options"><code>network_interface</code></a> devices in the order they are
declared.</p>
<p>Given the following example:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.public.id}"</span>
  <span class="p">}</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.private.id}"</span>
  <span class="p">}</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="o">...</span>

    <span class="n">customize</span> <span class="p">{</span>
      <span class="o">...</span>

      <span class="n">network_interface</span> <span class="p">{</span>
        <span class="n">ipv4_address</span> <span class="o">=</span> <span class="s2">"10.0.0.10"</span>
        <span class="n">ipv4_netmask</span> <span class="o">=</span> <span class="mi">24</span>
      <span class="p">}</span>

      <span class="n">network_interface</span> <span class="p">{</span>
        <span class="n">ipv4_address</span> <span class="o">=</span> <span class="s2">"172.16.0.10"</span>
        <span class="n">ipv4_netmask</span> <span class="o">=</span> <span class="mi">24</span>
      <span class="p">}</span>

      <span class="n">ipv4_gateway</span> <span class="o">=</span> <span class="s2">"10.0.0.1"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>The first set of <code>network_interface</code> data would be assigned to the <code>public</code>
interface, and the second to the <code>private</code> interface.</p>
<p>To use DHCP, declare an empty <code>network_interface</code> block for each interface
being configured. So the above example would look like:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.public.id}"</span>
  <span class="p">}</span>

  <span class="n">network_interface</span> <span class="p">{</span>
    <span class="n">network_id</span>   <span class="o">=</span> <span class="s2">"${data.vsphere_network.private.id}"</span>
  <span class="p">}</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="o">...</span>

    <span class="n">customize</span> <span class="p">{</span>
      <span class="o">...</span>

      <span class="n">network_interface</span> <span class="p">{}</span>

      <span class="n">network_interface</span> <span class="p">{}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>The options are:</p>

<ul>
<li><a name="dns_server_list" /><a href="#dns_server_list"><code>dns_server_list</code></a> - (Optional) Network interface-specific DNS server settings
for Windows operating systems. Ignored on Linux and possibly other opearating
systems - for those systems, please see the <a href="#global-dns-settings">global DNS
settings</a> section.
</li>
<li><a name="dns_domain" /><a href="#dns_domain"><code>dns_domain</code></a> - (Optional) Network interface-specific DNS search domain for
Windows operating systems. Ignored on Linux and possibly other opearating
systems - for those systems, please see the <a href="#global-dns-settings">global DNS
settings</a> section.
</li>
<li><a name="ipv4_address" /><a href="#ipv4_address"><code>ipv4_address</code></a> - (Optional) The IPv4 address assigned to this network adapter. If left
blank or not included, DHCP is used.
</li>
<li><a name="ipv4_netmask" /><a href="#ipv4_netmask"><code>ipv4_netmask</code></a> The IPv4 subnet mask, in bits (example: <code>24</code> for
255.255.255.0).
</li>
<li><a name="ipv6_address" /><a href="#ipv6_address"><code>ipv6_address</code></a> - (Optional) The IPv6 address assigned to this network adapter. If left
blank or not included, auto-configuration is used.
</li>
<li><a name="ipv6_netmask" /><a href="#ipv6_netmask"><code>ipv6_netmask</code></a> - (Optional) The IPv6 subnet mask, in bits (example: <code>32</code>).
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> The minimum setting for IPv4 in a customization specification is
DHCP. If you are setting up an IPv6-exclusive network without DHCP, you might
need to set <a href="#wait_for_guest_net_timeout"><code>wait_for_guest_net_timeout</code></a> to a
high enough value to cover the DHCP timeout of your virtual machine, or turn it
off altogether by supplying a zero or negative value. Keep in mind that turning
off <code>wait_for_guest_net_timeout</code> will more than likely mean that IP addresses
will not be reported to any provisioners you may have configured on the
resource.</p>
</div>
<h4 id="global-routing-settings">
  <a name="global-routing-settings" class="anchor" href="#global-routing-settings">&raquo;</a>
  Global routing settings
</h4>
<p>VM customization under the <code>vsphere_virtual_machine</code> resource does not take a
per-interface gateway setting, but rather default routes are configured on a
global basis. For an example, see the <a href="#network-interface-settings">network interface settings
section</a>.</p>
<p>The settings here must match the IP/mask of at least one <code>network_interface</code>
supplied to customization.</p>
<p>The options are:</p>

<ul>
<li><a name="ipv4_gateway" /><a href="#ipv4_gateway"><code>ipv4_gateway</code></a> - (Optional) The IPv4 default gateway when using
<code>network_interface</code> customization on the virtual machine.
</li>
<li><a name="ipv6_gateway" /><a href="#ipv6_gateway"><code>ipv6_gateway</code></a> - (Optional) The IPv6 default gateway when using
<code>network_interface</code> customization on the virtual machine.
</li>
</ul>
<h4 id="global-dns-settings">
  <a name="global-dns-settings" class="anchor" href="#global-dns-settings">&raquo;</a>
  Global DNS settings
</h4>
<p>The following settings configure DNS globally, generally for Linux systems. For
Windows systems, this is done per-interface, see <a href="#network-interface-settings">network interface
settings</a>.</p>

<ul>
<li><a name="dns_server_list-1" /><a href="#dns_server_list-1"><code>dns_server_list</code></a> - The list of DNS servers to configure on a virtual
machine. 
</li>
<li><a name="dns_suffix_list" /><a href="#dns_suffix_list"><code>dns_suffix_list</code></a> - A list of DNS search domains to add to the DNS
configuration on the virtual machine.
</li>
</ul>
<h4 id="linux-customization-options">
  <a name="linux-customization-options" class="anchor" href="#linux-customization-options">&raquo;</a>
  Linux customization options
</h4>
<p>The settings in the <code>linux_options</code> block pertain to Linux guest OS
customization. If you are customizing a Linux operating system, this section
must be included.</p>
<p>Example:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="o">...</span>

    <span class="n">customize</span> <span class="p">{</span>
      <span class="o">...</span>

      <span class="n">linux_options</span> <span class="p">{</span>
        <span class="n">host_name</span> <span class="o">=</span> <span class="s2">"terraform-test"</span>
        <span class="n">domain</span>    <span class="o">=</span> <span class="s2">"test.internal"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>The options are:</p>

<ul>
<li><a name="host_name" /><a href="#host_name"><code>host_name</code></a> - (Required) The host name for this machine. This, along with
<code>domain</code>, make up the FQDN of this virtual machine.
</li>
<li><a name="domain" /><a href="#domain"><code>domain</code></a> - (Required) The domain name for this machine. This, along with
<code>host_name</code>, make up the FQDN of this virtual machine.
</li>
<li><a name="hw_clock_utc" /><a href="#hw_clock_utc"><code>hw_clock_utc</code></a> - (Optional) Tells the operating system that the hardware
clock is set to UTC. Default: <code>true</code>.
</li>
<li><a name="time_zone" /><a href="#time_zone"><code>time_zone</code></a> - (Optional) Sets the time zone. For a list of possible
combinations, click <a href="https://pubs.vmware.com/vsphere-6-5/topic/com.vmware.wssdk.apiref.doc/timezone.html">here</a>. The default is UTC.
</li>
</ul>
<h4 id="windows-customization-options">
  <a name="windows-customization-options" class="anchor" href="#windows-customization-options">&raquo;</a>
  Windows customization options
</h4>
<p>The settings in the <code>windows_options</code> block pertain to Windows guest OS
customization. If you are customizing a Windows operating system, this section
must be included.</p>
<p>Example:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="o">...</span>

    <span class="n">customize</span> <span class="p">{</span>
      <span class="o">...</span>

      <span class="n">windows_options</span> <span class="p">{</span>
        <span class="n">computer_name</span>  <span class="o">=</span> <span class="s2">"terraform-test"</span>
        <span class="n">workgroup</span>      <span class="o">=</span> <span class="s2">"test"</span>
        <span class="n">admin_password</span> <span class="o">=</span> <span class="s2">"VMw4re"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>The options are:</p>

<ul>
<li><a name="computer_name" /><a href="#computer_name"><code>computer_name</code></a> - (Required) The computer name of this virtual machine.
</li>
<li><a name="admin_password" /><a href="#admin_password"><code>admin_password</code></a> - (Optional) The administrator password for this virtual
machine.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> <code>admin_password</code> is a sensitive field in Terraform and will not be
output on-screen, but is stored in state and sent to the VM in plain text -
keep this in mind when provisioning your infrastructure.</p>
</div>

<ul>
<li><a name="workgroup" /><a href="#workgroup"><code>workgroup</code></a> - (Optional) The workgroup name for this virtual machine. One of
this or <code>join_domain</code> must be included.
</li>
<li><a name="join_domain" /><a href="#join_domain"><code>join_domain</code></a> - (Optional) The domain to join for this virtual machine. One
of this or <code>workgroup</code> must be included.
</li>
<li><a name="domain_admin_user" /><a href="#domain_admin_user"><code>domain_admin_user</code></a> - (Optional) The user of the domain administrator used to
join this virtual machine to the domain. Required if you are setting <code>join_domain</code>.
</li>
<li><a name="domain_admin_password" /><a href="#domain_admin_password"><code>domain_admin_password</code></a> - (Optional) The password of the domain administrator
used to join this virtual machine to the domain. Required if you are setting
<code>join_domain</code>.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> <code>domain_admin_password</code> is a sensitive field in Terraform and will
not be output on-screen, but is stored in state and sent to the VM in plain
text - keep this in mind when provisioning your infrastructure.</p>
</div>

<ul>
<li><a name="full_name" /><a href="#full_name"><code>full_name</code></a> - (Optional) The full name of the user of this virtual machine.
This populates the &quot;user&quot; field in the general Windows system information.
Default: <code>Administrator</code>.
</li>
<li><a name="organization_name" /><a href="#organization_name"><code>organization_name</code></a> - (Optional) The organization name this virtual machine
is being installed for.  This populates the &quot;organization&quot; field in the
general Windows system information.  Default: <code>Managed by Terraform</code>.
</li>
<li><a name="product_key" /><a href="#product_key"><code>product_key</code></a> - (Optional) The product key for this virtual machine. The
default is no key.
</li>
<li><a name="run_once_command_list" /><a href="#run_once_command_list"><code>run_once_command_list</code></a> - (Optional) A list of commands to run at first user
logon, after guest customization.
</li>
<li><a name="auto_logon" /><a href="#auto_logon"><code>auto_logon</code></a> - (Optional) Specifies whether or not the VM automatically logs
on as Administrator. Default: <code>false</code>.
</li>
<li><a name="auto_logon_count" /><a href="#auto_logon_count"><code>auto_logon_count</code></a> - (Optional) Specifies how many times the VM should auto-logon
the Administrator account when <code>auto_logon</code> is true. This should be set
accordingly to ensure that all of your commands that run in
<code>run_once_command_list</code> can log in to run. Default: <code>1</code>.
</li>
<li><a name="time_zone-1" /><a href="#time_zone-1"><code>time_zone</code></a> - (Optional) The new time zone for the virtual machine. This is a
numeric, sysprep-dictated, timezone code. For a list of codes, click
<a href="https://msdn.microsoft.com/en-us/library/ms912391(v=winembedded.11).aspx">here</a>. The default is <code>85</code> (GMT/UTC).
</li>
</ul>
<h4 id="supplying-your-own-sysprep-file">
  <a name="supplying-your-own-sysprep-file" class="anchor" href="#supplying-your-own-sysprep-file">&raquo;</a>
  Supplying your own SysPrep file
</h4>
<p>Alternative to the <code>windows_options</code> supplied above, you can instead supply
your own <code>sysprep.inf</code> file contents via the <code>windows_sysprep_text</code> option.
This allows full control of the customization process out-of-band of vSphere.
Example below:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="o">...</span>

    <span class="n">customize</span> <span class="p">{</span>
      <span class="o">...</span>

      <span class="n">windows_sysprep_text</span> <span class="o">=</span> <span class="s2">"${file("</span><span class="err">$</span><span class="p">{</span><span class="n">path</span><span class="p">.</span><span class="nf">module</span><span class="p">}</span><span class="o">/</span><span class="n">sysprep</span><span class="p">.</span><span class="nf">inf</span><span class="s2">")}"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Note this option is mutually exclusive to <code>windows_options</code> - one must not be
included if the other is specified.</p>
<h3 id="using-vapp-properties-to-supply-ovf-ova-configuration">
  <a name="using-vapp-properties-to-supply-ovf-ova-configuration" class="anchor" href="#using-vapp-properties-to-supply-ovf-ova-configuration">&raquo;</a>
  Using vApp properties to supply OVF/OVA configuration
</h3>
<p>Alternative to the settings in <code>customize</code>, one can use the settings in the
<code>properties</code> section of the <code>vapp</code> block to supply configuration parameters to
a virtual machine cloned from a template that came from an imported OVF or OVA
file. Both GuestInfo and ISO transport methods are supported. For templates
that use ISO transport, a CDROM backed by client device is required. See <a href="#cdrom-options">CDROM
options</a> for details.</p>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> The only supported usage path for vApp properties is for existing
user-configurable keys. These generally come from an existing template that was
created from an imported OVF or OVA file. You cannot set values for vApp
properties on virtual machines created from scratch, virtual machines lacking a
vApp configuration, or on property keys that do not exist.</p>
</div>
<p>The configuration looks similar to the one below:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="nb">clone</span> <span class="p">{</span>
    <span class="n">template_uuid</span> <span class="o">=</span> <span class="s2">"${data.vsphere_virtual_machine.template_from_ovf.id}"</span>
  <span class="p">}</span>

  <span class="n">vapp</span> <span class="p">{</span>
    <span class="n">properties</span> <span class="p">{</span>
      <span class="s2">"guestinfo.hostname"</span>                        <span class="o">=</span> <span class="s2">"${var.vm_name}.foobar.local"</span>
      <span class="s2">"guestinfo.interface.0.name"</span>                <span class="o">=</span> <span class="s2">"ens192"</span>
      <span class="s2">"guestinfo.interface.0.ip.0.address"</span>        <span class="o">=</span> <span class="s2">"10.0.0.100/24"</span>
      <span class="s2">"guestinfo.interface.0.route.0.gateway"</span>     <span class="o">=</span> <span class="s2">"10.0.0.1"</span>
      <span class="s2">"guestinfo.interface.0.route.0.destination"</span> <span class="o">=</span> <span class="s2">"0.0.0.0/0"</span>
      <span class="s2">"guestinfo.dns.server.0"</span>                    <span class="o">=</span> <span class="s2">"10.0.0.10"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="additional-requirements-and-notes-for-cloning">
  <a name="additional-requirements-and-notes-for-cloning" class="anchor" href="#additional-requirements-and-notes-for-cloning">&raquo;</a>
  Additional requirements and notes for cloning
</h3>
<p>Note that when cloning from a template, there are additional requirements in
both the resource configuration and source template:</p>

<ul>
<li>The virtual machine must not be powered on at the time of cloning.
</li>
<li>All disks on the virtual machine must be SCSI disks.
</li>
<li>You must specify at least the same number of <code>disk</code> devices as there are
disks that exist in the template. These devices are ordered and lined up by
the <code>unit_number</code> attribute. Additional disks can be added past this.
</li>
<li>The <code>size</code> of a virtual disk must be at least the same size as its
counterpart disk in the template.
</li>
<li>When using <code>linked_clone</code>, the <code>size</code>, <code>thin_provisioned</code>, and
<code>eagerly_scrub</code> settings for each disk must be an exact match to the
individual disk&#39;s counterpart in the source template.
</li>
<li>The <a href="#scsi_controller_count"><code>scsi_controller_count</code></a> setting should be
configured as necessary to cover all of the disks on the template. For best
results, only configure this setting for the amount of controllers you will
need to cover your disk quantity and bandwidth needs, and configure your
template accordingly. For most workloads, this setting should be kept at its
default of <code>1</code>, and all disks in the template should reside on the single,
primary controller.
</li>
<li>Some operating systems (such as Windows) do not respond well to a change in
disk controller type, so when using such OSes, take care to ensure that
<code>scsi_type</code> is set to an exact match of the template&#39;s controller set. For
maximum compatibility, make sure the SCSI controllers on the source template
are all the same type.
</li>
</ul>
<p>To ease the gathering of some of these options, you can use the
<a href="/docs/providers/vsphere/d/virtual_machine.html"><code>vsphere_virtual_machine</code> data source</a>, which
will give you disk attributes, network interface types, SCSI bus types, and
also the guest ID of the source template.  See the <a href="#cloning-and-customization-example">cloning and customization
example</a> for usage details.</p>
<h2 id="virtual-machine-migration">
  <a name="virtual-machine-migration" class="anchor" href="#virtual-machine-migration">&raquo;</a>
  Virtual Machine Migration
</h2>
<p>The <code>vsphere_virtual_machine</code> resource supports live migration (otherwise known
as vMotion) both on the host and storage level. One can migrate the entire VM
to another host, cluster, resource pool, or datastore, and migrate or pin a
single disk to a specific datastore.</p>
<h3 id="host-cluster-and-resource-pool-migration">
  <a name="host-cluster-and-resource-pool-migration" class="anchor" href="#host-cluster-and-resource-pool-migration">&raquo;</a>
  Host, cluster, and resource pool migration
</h3>
<p>To migrate the virtual machine to another host or resource pool, change the
<code>host_system_id</code> or <code>resource_pool_id</code> to the manged object IDs of the new host
or resource pool accordingly. To change the virtual machine&#39;s cluster or
standalone host, select a resource pool within the specific target.</p>
<p>The same rules apply for migration as they do for VM creation - any host
specified needs to be a part of the resource pool supplied. Also keep in mind
the implications of moving the virtual machine to a resource pool in another
cluster or standalone host, namely ensuring that all hosts in the cluster (or
the single standalone host) have access to the datastore that the virtual
machine is in.</p>
<h3 id="storage-migration">
  <a name="storage-migration" class="anchor" href="#storage-migration">&raquo;</a>
  Storage migration
</h3>
<p>Storage migration can be done on two levels:</p>

<ul>
<li>Global datastore migration can be handled by changing the global
<code>datastore_id</code> attribute. This triggers a storage migration for all disks
that do not have an explicit <code>datastore_id</code> specified.
</li>
<li>When using Storage DRS through the <code>datastore_cluster_id</code> attribute, the
entire virtual machine can be migrated from one datastore cluster to another
by changing the value of this setting. In addition, when
<code>datastore_cluster_id</code> is in use, any disks that drift to datastores outside
of the datastore cluster via such actions as manual modification will be
migrated back to the datastore cluster on the next apply.
</li>
<li>An individual <code>disk</code> device can be migrated by manually specifying the
<code>datastore_id</code> in its configuration block. This also pins it to the specific
datastore that is specified - if at a later time the VM and any unpinned
disks migrate to another host, the disk will stay on the specified datastore.
</li>
</ul>
<p>An example of datastore pinning is below. As long as the datastore in the
<code>pinned_datastore</code> data source does not change, any change to the standard
<code>vm_datastore</code> data source will not affect the data disk - the disk will stay
where it is.</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"vsphere_virtual_machine"</span> <span class="s2">"vm"</span> <span class="p">{</span>
  <span class="o">...</span>

  <span class="n">datastore_id</span>     <span class="o">=</span> <span class="s2">"${data.vsphere_datastore.vm_datastore.id}"</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">"disk0"</span>
    <span class="n">size</span>  <span class="o">=</span> <span class="mi">10</span>
  <span class="p">}</span>

  <span class="n">disk</span> <span class="p">{</span>
    <span class="n">datastore_id</span> <span class="o">=</span> <span class="s2">"${data.vsphere_datastore.pinned_datastore.id}"</span>
    <span class="n">label</span>        <span class="o">=</span> <span class="s2">"disk1"</span>
    <span class="n">size</span>         <span class="o">=</span> <span class="mi">100</span>
    <span class="n">unit_number</span>  <span class="o">=</span> <span class="mi">1</span>
  <span class="p">}</span>

  <span class="o">...</span>
<span class="p">}</span>
</code></pre></div><h4 id="storage-migration-restrictions">
  <a name="storage-migration-restrictions" class="anchor" href="#storage-migration-restrictions">&raquo;</a>
  Storage migration restrictions
</h4>
<p>Note that you cannot migrate external disks added with the <code>attach</code> parameter.
As these disks have usually been created and assigned to a datastore outside of
the scope of the <code>vsphere_virtual_machine</code> resource in question, such as by
using the <a href="/docs/providers/vsphere/r/virtual_disk.html"><code>vsphere_virtual_disk</code> resource</a>,
management of such disks would render their configuration unstable.</p>
<h2 id="attribute-reference">
  <a name="attribute-reference" class="anchor" href="#attribute-reference">&raquo;</a>
  Attribute Reference
</h2>
<p>The following attributes are exported on the base level of this resource:</p>

<ul>
<li><a name="id" /><a href="#id"><code>id</code></a> - The UUID of the virtual machine.
</li>
<li><a name="reboot_required" /><a href="#reboot_required"><code>reboot_required</code></a> - Value internal to Terraform used to determine if a
configuration set change requires a reboot. This value is only useful during
an update process and gets reset on refresh.
</li>
<li><a name="vmware_tools_status" /><a href="#vmware_tools_status"><code>vmware_tools_status</code></a> - The state of VMware tools in the guest. This will
determine the proper course of action for some device operations.
</li>
<li><a name="vmx_path" /><a href="#vmx_path"><code>vmx_path</code></a> - The path of the virtual machine&#39;s configuration file in the VM&#39;s
datastore.
</li>
<li><a name="imported" /><a href="#imported"><code>imported</code></a> - This is flagged if the virtual machine has been imported, or the
state has been migrated from a previous version of the resource. It
influences the behavior of the first post-import apply operation. See the
section on <a href="#importing">importing</a> below.
</li>
<li><a name="change_version" /><a href="#change_version"><code>change_version</code></a> - A unique identifier for a given version of the last
configuration applied, such the timestamp of the last update to the
configuration.
</li>
<li><a name="uuid-1" /><a href="#uuid-1"><code>uuid</code></a> - The UUID of the virtual machine. Also exposed as the <code>id</code> of the
resource.
</li>
<li><a name="default_ip_address" /><a href="#default_ip_address"><code>default_ip_address</code></a> - The IP address selected by Terraform to be used with
any <a href="/docs/provisioners/index.html">provisioners</a> configured on this resource.
Whenever possible, this is the first IPv4 address that is reachable through
the default gateway configured on the machine, then the first reachable IPv6
address, and then the first general discovered address if neither exist. If
VMware tools is not running on the virtual machine, or if the VM is powered
off, this value will be blank.
</li>
<li><a name="guest_ip_addresses" /><a href="#guest_ip_addresses"><code>guest_ip_addresses</code></a> - The current list of IP addresses on this machine,
including the value of <code>default_ip_address</code>. If VMware tools is not running
on the virtual machine, or if the VM is powered off, this list will be empty.
</li>
<li><a name="moid" /><a href="#moid"><code>moid</code></a>: The <a href="/docs/providers/vsphere/index.html#use-of-managed-object-references-by-the-vsphere-provider">managed object reference ID</a> of the created
virtual machine.
</li>
<li><a name="vapp_transport" /><a href="#vapp_transport"><code>vapp_transport</code></a> - Computed value which is only valid for cloned virtual
machines. A list of vApp transport methods supported by the source virtual
machine or template.
</li>
</ul>
<h2 id="importing">
  <a name="importing" class="anchor" href="#importing">&raquo;</a>
  Importing
</h2>
<p>An existing virtual machine can be <a href="/docs/import/index.html">imported</a> into this resource
via supplying the full path to the virtual machine. An example is below:</p>
<div class="highlight"><pre class="highlight plaintext"><code>terraform import vsphere_virtual_machine.vm /dc1/vm/srv1
</code></pre></div><p>The above would import the virtual machine named <code>srv1</code> that is located in the
<code>dc1</code> datacenter.</p>
<h3 id="additional-requirements-and-notes-for-importing">
  <a name="additional-requirements-and-notes-for-importing" class="anchor" href="#additional-requirements-and-notes-for-importing">&raquo;</a>
  Additional requirements and notes for importing
</h3>
<p>Many of the same requirements for
<a href="#additional-requirements-and-notes-for-cloning">cloning</a> apply to importing,
although since importing writes directly to state, a lot of these rules cannot
be enforced at import time, so every effort should be made to ensure the
correctness of the configuration before the import.</p>
<p>In addition to these rules, the following extra rules apply to importing:</p>

<ul>
<li>Disks need to have their <a href="#label"><code>label</code></a> argument assigned in a convention
matching <code>diskN</code>, starting with disk number 0, based on each disk&#39;s order on
the SCSI bus. As an example, a disk on SCSI controller 0 with a unit number
of 0 would be labeled <code>disk0</code>, a disk on the same controller with a unit
number of 1 would be <code>disk1</code>, but the next disk, which is on SCSI controller
1 with a unit number of 0, still becomes <code>disk2</code>.
</li>
<li>Disks always get imported with <a href="#keep_on_remove"><code>keep_on_remove</code></a> enabled
until the first <code>terraform apply</code> runs, which will remove the setting for
known disks. This is an extra safeguard against naming or accounting mistakes
in the disk configuration.
</li>
<li>The <a href="#scsi_controller_count"><code>scsi_controller_count</code></a> for the resource is set
to the number of contiguous SCSI controllers found, starting with the SCSI
controller at bus number 0. If no SCSI controllers are found, the VM is not
eligible for import. To ensure maximum compatibility, make sure your virtual
machine has the exact number of SCSI controllers it needs, and set
<a href="#scsi_controller_count"><code>scsi_controller_count</code></a> accordingly.
</li>
</ul>
<p>After importing, you should run <code>terraform plan</code>. Unless you have changed
anything else in configuration that would be causing other attributes to
change, the only difference should be configuration-only changes, usually
comprising of:</p>

<ul>
<li>The <a href="#imported"><code>imported</code></a> flag will transition from <code>true</code> to <code>false</code>.
</li>
<li><a href="#keep_on_remove"><code>keep_on_remove</code></a> of known disks will transition from
<code>true</code> to <code>false</code>. 
</li>
<li>Configuration supplied in the <a href="#clone"><code>clone</code></a> block, if present, will be
persisted to state. This initial persistence operation does not perform any
cloning or customization actions, nor does it force a new resource. After the
first apply operation, further changes to <code>clone</code> will force a new resource
as per normal operation.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Further to the above, do not make any configuration changes to
<code>clone</code> after importing or upgrading from a legacy version of the provider
before doing an initial <code>terraform apply</code> as these changes will not correctly
force a new resource, and your changes will have persisted to state, preventing
further plans from correctly triggering a diff.</p>
</div>
<p>These changes only update Terraform state when applied, hence it is safe to run
when the virtual machine is running. If more settings are being modified, you
may need to plan maintenance accordingly for any necessary re-configuration of
the virtual machine.</p>


    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="/intro/index.html">Intro</a></li>
              <li><a href="/docs/index.html">Docs</a></li>
              <li><a href="/docs/extend/index.html">Extend</a></li>
              <li><a href="https://www.hashicorp.com/privacy">Privacy</a></li>
              <li><a href="/security.html">Security</a></li>
              <li><a href="/assets/files/press-kit.zip">Press Kit</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="https://github.com/hashicorp/terraform-website">Edit this page</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Product",
        "name": "Terraform",
        "alternateName": "Terraform by HashiCorp",
        "manufacturer": "HashiCorp",
        "url": "https://www.terraform.io",
        "logo": "https://www.terraform.io/assets/images/logo-hashicorp-3f10732f.svg",
        "sameAs": [
          "https://github.com/hashicorp/terraform"
        ]
      }
    </script>
  </body>
</html>
