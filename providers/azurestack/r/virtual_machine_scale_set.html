
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Manages a Virtual Machine scale set.">

    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon-13180a24.png">
    <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-32x32-62171ffd.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-16x16-2821bcc8.png" sizes="16x16">
    <link rel="manifest" href="/android-manifest.json">
    <link rel="mask-icon" href="/assets/images/favicons/safari-pinned-tab-bab846e1.svg" color="#5C4EE5">
    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@HashiCorp" />
    <meta name="twitter:creator" content="@HashiCorp" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.terraform.io/docs/providers/azurestack/r/virtual_machine_scale_set.html" />
    <meta property="og:title" content="Azure Resource Manager: azurestack_virtual_machine_scale_set - Terraform by HashiCorp" />
    <meta property="og:site_name" content="Terraform by HashiCorp"/>
    <meta property="og:image" content="https://www.terraform.io/assets/images/og-image-f5bbc98c.png"/>
    <meta property="og:image:width" content="100"/>
    <meta property="og:image:height" content="100"/>
    <meta property="og:description" content="Manages a Virtual Machine scale set." />

    <title>Azure Resource Manager: azurestack_virtual_machine_scale_set - Terraform by HashiCorp</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://use.typekit.net/wxf7mfi.css">
    <link href="/assets/stylesheets/application-825d2399.css" rel="stylesheet" />

    <!-- Site scripts -->
    <!--[if lt IE 9]><script src="/assets/javascripts/ie-compat-c141a02d.js" defer="defer"></script><![endif]-->
    <script src="/assets/javascripts/application-e080fe63.js" defer="defer"></script>

    <!-- Analytics scrpts -->
    <script defer>
      !function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),e.push(a),e}};for(var t=0;t<e.methods.length;t++){var a=e.methods[t];e[a]=e.factory(a)}e.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},e.SNIPPET_VERSION="4.0.0",e.load("0EXTgkNx0Ydje2PGXVbRhpKKoe5wtzcE")}}();var om597a24292a958,om597a24292a958_poll=function(){var e=0;return function(t,a){clearInterval(e),e=setInterval(t,a)}}();!function(e,t,a){if(e.getElementById(a))om597a24292a958_poll(function(){if(window.om_loaded&&!om597a24292a958)return(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0})},25);else{var n=!1,o=e.createElement("script");o.id=a,o.src="//a.optnmstr.com/app/js/api.min.js",o.async=!0,o.onload=o.onreadystatechange=function(){if(!(n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState))try{n=om_loaded=!0,(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0}),o.onload=o.onreadystatechange=null}catch(e){}},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(o)}}(document,0,"omapi-script");
    </script>

    
  </head>

  <body id="page-docs-azurestack-resource-compute-virtualmachine-scale-set" class="layout-azurestack page-azure-resource-manager-azurestack-virtual-machine-scale-set">

    <svg class="hidden-print" aria-hidden="true" style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <symbol id="mega-nav-icon-angle" viewBox="0 0 13 7">
      <polygon points="6.5,6.5 0.7,1.6 1.3,0.8 6.5,5.2 11.7,0.8 12.3,1.6 "/>
    </symbol>
    <symbol id="mega-nav-icon-close" viewBox="0 0 13 15">
      <path vector-effect="non-scaling-stroke" d="M1.1 14L11.9 1M11.9 14L1.1 1"/>
    </symbol>
  </defs>
</svg>
<div class="hidden-print mega-nav-sandbox">
  <div class="mega-nav-banner">
    <div class="container">
      <div class="mega-nav-banner-item">
        <a class="mega-nav-banner-logo" href="https://www.hashicorp.com"><img src="/assets/images/mega-nav/logo-hashicorp-wordmark-bbed0e8a.svg" alt="HashiCorp Logo" /></a>
      </div>
      <div class="mega-nav-banner-item">
        <p class="mega-nav-tagline"><span class="visible-xs text-muted">Learn the</span><span class="hidden-xs text-muted">Learn how Terraform fits into the</span></p>
        <div id="#mega-nav" class="mega-nav">
          <button type="button" id="mega-nav-ctrl" class="mega-nav-ctrl">
            <div class="mega-nav-ctrl-items">
              <img src="/assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" />
              <strong>HashiCorp Suite</strong>
              <span class="mega-nav-icon-outline">
                <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg><span class="visuallyhidden">Open</span>
              </span>
            </div>
          </button>
          <div id="mega-nav-body-ct" class="mega-nav-body-ct" aria-labelledby="mega-nav-ctrl">
            <div class="mega-nav-body">
              <button type="button" id="mega-nav-close" class="mega-nav-close"><svg class="mega-nav-icon mega-nav-icon-close" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-close"></use></svg><span class="visuallyhidden">Close</span></button>
              <div class="mega-nav-body-header">
                <div class="mega-nav-body-header-item">
                  <h2 class="mega-nav-h1">Provision, Secure, Connect, and&nbsp;Run</h2>
                  <p class="mega-nav-h2">Any infrastructure for any&nbsp;application</p>
                </div>
                <div class="mega-nav-body-header-item">
                  <a href="https://www.hashicorp.com/" class="mega-nav-btn"><img src="/assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" /> Learn the HashiCorp Enterprise&nbsp;Suite <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg></a>
                </div>
              </div>
              <div class="mega-nav-body-grid">
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Provision</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vagrantup.com" class="mega-nav-grid-item mega-nav-grid-item-vagrant">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-vagrant-a7ab5898.svg" alt="Vagrant Logo" />
                        </div>
                        <b>Vagrant</b>
                        <ul>
                          <li><span class="mega-nav-tag">Build</span></li>
                          <li><span class="mega-nav-tag">Test</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.packer.io" class="mega-nav-grid-item mega-nav-grid-item-packer">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-packer-cb3b9b94.svg" alt="Packer Logo" />
                        </div>
                        <b>Packer</b>
                        <ul>
                          <li><span class="mega-nav-tag">Package</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.terraform.io" class="mega-nav-grid-item mega-nav-grid-item-terraform">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-terraform-ff69eaae.svg" alt="Terraform Logo" />
                        </div>
                        <b>Terraform</b>
                        <ul>
                          <li><span class="mega-nav-tag">Provision</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Secure</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vaultproject.io" class="mega-nav-grid-item mega-nav-grid-item-vault">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-vault-0f83e3d2.svg" alt="Vault Logo" />
                        </div>
                        <b>Vault</b>
                        <ul>
                          <li><span class="mega-nav-tag">Secure</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Connect</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.consul.io" class="mega-nav-grid-item mega-nav-grid-item-consul">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-consul-c77f6844.svg" alt="Consul Logo" />
                        </div>
                        <b>Consul</b>
                        <ul>
                          <li><span class="mega-nav-tag">Connect</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Run</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.nomadproject.io" class="mega-nav-grid-item mega-nav-grid-item-nomad">
                        <div class="mega-nav-grid-item-img">
                          <img src="/assets/images/mega-nav/logo-nomad-c4c148be.svg" alt="Nomad Logo" />
                        </div>
                        <b>Nomad</b>
                        <ul>
                          <li><span class="mega-nav-tag">Run</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="mega-nav-body-footer">
                <p>Seven elements of the modern Application Lifecycle</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="50">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="/intro/index.html">Intro</a></li>
                  <li><a href="/docs/index.html">Docs</a></li>
                  <li><a href="/guides/index.html">Guides</a></li>
                  <li><a href="/docs/extend/index.html">Extend</a></li>
                  <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
                  <li>
                    <a href="/downloads.html">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
                    </a>
                  </li>
                  <li>
                    <a href="https://github.com/hashicorp/terraform">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="42">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="/intro/index.html">Intro</a></li>
    <li><a href="/docs/index.html">Docs</a></li>
    <li><a href="/guides/index.html">Guides</a></li>
    <li><a href="/docs/extend/index.html">Extend</a></li>
    <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
  </ul>

  <div class="divider"></div>

  <ul class="external nav sidebar-nav">
    <li>
      <a href="/downloads.html">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
      </a>
    </li>
    <li>
      <a href="https://github.com/hashicorp/terraform">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
      </a>
    </li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-4 col-md-3 col-xs-12 hidden-print" role="complementary">
              <div class="docs-sidebar hidden-print affix-top" role="complementary">
          <ul class="nav docs-sidenav">
            <li>
              <a href="/docs/providers/index.html">All Providers</a>
            </li>

            <li>
              <a href="/docs/providers/azurestack/index.html">Azure Stack Provider</a>
              <ul class="nav nav-visible">
                <li>
                    <a href="/docs/providers/azurestack/authenticating_via_service_principal.html">Authenticating via a Service Principal (Shared Account)</a>
                </li>
              </ul>
            </li>

            <li>
              <a href="#">Data Sources</a>
              <ul class="nav nav-visible">

                <li>
                    <a href="/docs/providers/azurestack/d/network_interface.html">azurestack_network_interface</a>
                </li>

                <li>
                    <a href="/docs/providers/azurestack/d/network_security_group.html">azurestack_network_security_group</a>
                </li>
                
                <li>
                    <a href="/docs/providers/azurestack/d/public_ip.html">azurestack_public_ip</a>
                </li>

                <li>
                    <a href="/docs/providers/azurestack/d/resource_group.html">azurestack_resource_group</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/d/route_table.html">azurestack_route_table</a>
                </li>


                <li>
                    <a href="/docs/providers/azurestack/d/storage_account.html">azurestack_storage_account</a>
                </li>
                <li>
                    <a href="/docs/providers/azurestack/d/subnet.html">azurestack_subnet</a>
                </li>
                <li>
                    <a href="/docs/providers/azurestack/d/virtual_network.html">azurestack_virtual_network</a>
                </li>
                <li>
                    <a href="/docs/providers/azurestack/d/virtual_network_gateway.html">azurestack_virtual_network_gateway</a>
                </li>

              </ul>
            </li>

            <li>
              <a href="#">Base Resources</a>
              <ul class="nav nav-visible">
                <li>
                  <a href="/docs/providers/azurestack/r/resource_group.html">azurestack_resource_group</a>
                </li>
              </ul>
            </li>

            <li class="active">
              <a href="#">Compute Resources</a>
              <ul class="nav nav-visible">

                <li>
                  <a href="/docs/providers/azurestack/r/availability_set.html">azurestack_availability_set</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/virtual_machine.html">azurestack_virtual_machine</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/virtual_machine_extension.html">azurestack_virtual_machine_extension</a>
                
                </li><li>
                  <a href="/docs/providers/azurestack/r/virtual_machine_scale_set.html">azurestack_virtual_machine_scale_set</a>
                </li>

              </ul>
            </li>

            <li>
                <a href="#">DNS Resources</a>
                <ul class="nav nav-visible">

                  <li>
                    <a href="/docs/providers/azurestack/r/dns_a_record.html">azurestack_dns_a_record</a>
                  </li>

                  <li>
                      <a href="/docs/providers/azurestack/r/dns_zone.html">azurestack_dns_zone</a>
                  </li>

                </ul>
            </li>

            <li>
              <a href="#">Network Resources</a>
              <ul class="nav nav-visible">

                <li>
                  <a href="/docs/providers/azurestack/r/local_network_gateway.html">azurestack_local_network_gateway</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/route.html">azurestack_route</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/route_table.html">azurestack_route_table</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/network_interface.html">azurestack_network_interface</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/network_security_group.html">azurestack_network_security_group</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/network_security_rule.html">azurestack_network_security_rule</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/public_ip.html">azurestack_public_ip</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/subnet.html">azurestack_subnet</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/virtual_network.html">azurestack_virtual_network</a>
                </li>

                 <li>
                  <a href="/docs/providers/azurestack/r/virtual_network_gateway.html">azurestack_virtual_network_gateway</a>
                </li>
              </ul>
            </li>

            <li>
              <a href="#">Storage Resources</a>
              <ul class="nav nav-visible">

                <li>
                  <a href="/docs/providers/azurestack/r/storage_account.html">azurestack_storage_account</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/storage_container.html">azurestack_storage_container</a>
                </li>

                <li>
                  <a href="/docs/providers/azurestack/r/storage_blob.html">azurestack_storage_blob</a>
                </li>
              </ul>
            </li>


            <li>
              <a href="#">Load Balancer Resources</a>
              <ul class="nav nav-visible">

                  <li>
                    <a href="/docs/providers/azurestack/r/loadbalancer.html">azurestack_lb</a>
                  </li>

                  <li>
                    <a href="/docs/providers/azurestack/r/loadbalancer_rule.html">azurestack_lb_rule</a>
                  </li>

                  <li>
                    <a href="/docs/providers/azurestack/r/loadbalancer_backend_address_pool.html">azurestack_lb_backend_address_pool</a>
                  </li>

                  <li>
                    <a href="/docs/providers/azurestack/r/loadbalancer_nat_rule.html">azurestack_lb_nat_rule</a>
                  </li>

                  <li>
                    <a href="/docs/providers/azurestack/r/loadbalancer_probe.html">azurestack_lb_probe</a>
                  </li>

                  <li>
                    <a href="/docs/providers/azurestack/r/loadbalancer_nat_pool.html">azurestack_lb_nat_pool</a>
                  </li>

              </ul>
            </li>

            <li>
              <a href="#">Template Resources</a>
              <ul class="nav nav-visible">
                <li>
                  <a href="/docs/providers/azurestack/r/template_deployment.html">azurestack_template_deployment</a>
                </li>
              </ul>
            </li>

          </ul>
        </div>

    </div>

    <div id="inner" class="col-sm-8 col-md-9 col-xs-12" role="main">
      
    <h1 id="azurestack_virtual_machine_scale_set">
  <a name="azurestack_virtual_machine_scale_set" class="anchor" href="#azurestack_virtual_machine_scale_set">&raquo;</a>
  azurestack_virtual_machine_scale_set
</h1>
<p>Manages a virtual machine scale set.</p>
<div class="alert alert-warning" role="alert">
<p><strong>Note:</strong> All arguments including the administrator login and password will be stored in the raw state as plain-text.
<a href="/docs/state/sensitive-data.html">Read more about sensitive data in state</a>.</p>
</div>
<h2 id="example-usage-with-unmanaged-disks">
  <a name="example-usage-with-unmanaged-disks" class="anchor" href="#example-usage-with-unmanaged-disks">&raquo;</a>
  Example Usage with Unmanaged Disks
</h2>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"azurestack_resource_group"</span> <span class="s2">"test"</span> <span class="p">{</span>
  <span class="nb">name</span>     <span class="o">=</span> <span class="s2">"acctestRG"</span>
  <span class="n">location</span> <span class="o">=</span> <span class="s2">"West US"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"azurestack_virtual_network"</span> <span class="s2">"test"</span> <span class="p">{</span>
  <span class="nb">name</span>                <span class="o">=</span> <span class="s2">"acctvn"</span>
  <span class="n">address_space</span>       <span class="o">=</span> <span class="p">[</span><span class="s2">"10.0.0.0/16"</span><span class="p">]</span>
  <span class="n">location</span>            <span class="o">=</span> <span class="s2">"West US"</span>
  <span class="n">resource_group_name</span> <span class="o">=</span> <span class="s2">"${azurestack_resource_group.test.name}"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"azurestack_subnet"</span> <span class="s2">"test"</span> <span class="p">{</span>
  <span class="nb">name</span>                 <span class="o">=</span> <span class="s2">"acctsub"</span>
  <span class="n">resource_group_name</span>  <span class="o">=</span> <span class="s2">"${azurestack_resource_group.test.name}"</span>
  <span class="n">virtual_network_name</span> <span class="o">=</span> <span class="s2">"${azurestack_virtual_network.test.name}"</span>
  <span class="n">address_prefix</span>       <span class="o">=</span> <span class="s2">"10.0.2.0/24"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"azurestack_storage_account"</span> <span class="s2">"test"</span> <span class="p">{</span>
  <span class="nb">name</span>                     <span class="o">=</span> <span class="s2">"accsa"</span>
  <span class="n">resource_group_name</span>      <span class="o">=</span> <span class="s2">"${azurestack_resource_group.test.name}"</span>
  <span class="n">location</span>                 <span class="o">=</span> <span class="s2">"westus"</span>
  <span class="n">account_tier</span>             <span class="o">=</span> <span class="s2">"Standard"</span>
  <span class="n">account_replication_type</span> <span class="o">=</span> <span class="s2">"LRS"</span>

  <span class="n">tags</span> <span class="p">{</span>
    <span class="n">environment</span> <span class="o">=</span> <span class="s2">"staging"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"azurestack_storage_container"</span> <span class="s2">"test"</span> <span class="p">{</span>
  <span class="nb">name</span>                  <span class="o">=</span> <span class="s2">"vhds"</span>
  <span class="n">resource_group_name</span>   <span class="o">=</span> <span class="s2">"${azurestack_resource_group.test.name}"</span>
  <span class="n">storage_account_name</span>  <span class="o">=</span> <span class="s2">"${azurestack_storage_account.test.name}"</span>
  <span class="n">container_access_type</span> <span class="o">=</span> <span class="s2">"private"</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"azurestack_virtual_machine_scale_set"</span> <span class="s2">"test"</span> <span class="p">{</span>
  <span class="nb">name</span>                <span class="o">=</span> <span class="s2">"mytestscaleset-1"</span>
  <span class="n">location</span>            <span class="o">=</span> <span class="s2">"West US"</span>
  <span class="n">resource_group_name</span> <span class="o">=</span> <span class="s2">"${azurestack_resource_group.test.name}"</span>
  <span class="n">upgrade_policy_mode</span> <span class="o">=</span> <span class="s2">"Manual"</span>

  <span class="n">sku</span> <span class="p">{</span>
    <span class="nb">name</span>     <span class="o">=</span> <span class="s2">"Standard_A0"</span>
    <span class="n">tier</span>     <span class="o">=</span> <span class="s2">"Standard"</span>
    <span class="n">capacity</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="p">}</span>

  <span class="n">os_profile</span> <span class="p">{</span>
    <span class="n">computer_name_prefix</span> <span class="o">=</span> <span class="s2">"testvm"</span>
    <span class="n">admin_username</span>       <span class="o">=</span> <span class="s2">"myadmin"</span>
    <span class="n">admin_password</span>       <span class="o">=</span> <span class="s2">"Passwword1234"</span>
  <span class="p">}</span>

  <span class="n">os_profile_linux_config</span> <span class="p">{</span>
    <span class="n">disable_password_authentication</span> <span class="o">=</span> <span class="kp">true</span>

    <span class="n">ssh_keys</span> <span class="p">{</span>
      <span class="n">path</span>     <span class="o">=</span> <span class="s2">"/home/myadmin/.ssh/authorized_keys"</span>
      <span class="n">key_data</span> <span class="o">=</span> <span class="s2">"${file("</span><span class="o">~</span><span class="sr">/.ssh/</span><span class="n">demo_key</span><span class="p">.</span><span class="nf">pub</span><span class="s2">")}"</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="n">network_profile</span> <span class="p">{</span>
    <span class="nb">name</span>    <span class="o">=</span> <span class="s2">"TestNetworkProfile"</span>
    <span class="n">primary</span> <span class="o">=</span> <span class="kp">true</span>

    <span class="n">ip_configuration</span> <span class="p">{</span>
      <span class="nb">name</span>      <span class="o">=</span> <span class="s2">"TestIPConfiguration"</span>
      <span class="n">subnet_id</span> <span class="o">=</span> <span class="s2">"${azurestack_subnet.test.id}"</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="n">storage_profile_os_disk</span> <span class="p">{</span>
    <span class="nb">name</span>           <span class="o">=</span> <span class="s2">"osDiskProfile"</span>
    <span class="n">caching</span>        <span class="o">=</span> <span class="s2">"ReadWrite"</span>
    <span class="n">create_option</span>  <span class="o">=</span> <span class="s2">"FromImage"</span>
    <span class="n">vhd_containers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"${azurestack_storage_account.test.primary_blob_endpoint}${azurestack_storage_container.test.name}"</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="n">storage_profile_image_reference</span> <span class="p">{</span>
    <span class="n">publisher</span> <span class="o">=</span> <span class="s2">"Canonical"</span>
    <span class="n">offer</span>     <span class="o">=</span> <span class="s2">"UbuntuServer"</span>
    <span class="n">sku</span>       <span class="o">=</span> <span class="s2">"16.04-LTS"</span>
    <span class="n">version</span>   <span class="o">=</span> <span class="s2">"latest"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="argument-reference">
  <a name="argument-reference" class="anchor" href="#argument-reference">&raquo;</a>
  Argument Reference
</h2>
<p>The following arguments are supported:</p>

<ul>
<li><a name="name" /><a href="#name"><code>name</code></a> - (Required) Specifies the name of the virtual machine scale set resource. Changing this forces a new resource to be created.
</li>
<li><a name="resource_group_name" /><a href="#resource_group_name"><code>resource_group_name</code></a> - (Required) The name of the resource group in which to create the virtual machine scale set. Changing this forces a new resource to be created.
</li>
<li><a name="location" /><a href="#location"><code>location</code></a> - (Required) Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.
</li>
<li><a name="sku" /><a href="#sku"><code>sku</code></a> - (Required) A sku block as documented below.
</li>
<li><a name="upgrade_policy_mode" /><a href="#upgrade_policy_mode"><code>upgrade_policy_mode</code></a> - (Required) Specifies the mode of an upgrade to virtual machines in the scale set. Possible values, <code>Manual</code> or <code>Automatic</code>.
</li>
<li><a name="overprovision" /><a href="#overprovision"><code>overprovision</code></a> - (Optional) Specifies whether the virtual machine scale set should be overprovisioned. Defaults to <code>true</code>.
</li>
<li><a name="license_type" /><a href="#license_type"><code>license_type</code></a> - (Optional, when a Windows machine) Specifies the Windows OS license type. If supplied, the only allowed values are <code>Windows_Client</code> and <code>Windows_Server</code>.
</li>
<li><a name="os_profile" /><a href="#os_profile"><code>os_profile</code></a> - (Required) A Virtual Machine OS Profile block as documented below.
</li>
<li><a name="os_profile_secrets" /><a href="#os_profile_secrets"><code>os_profile_secrets</code></a> - (Optional) A collection of Secret blocks as documented below.
</li>
<li><a name="os_profile_windows_config" /><a href="#os_profile_windows_config"><code>os_profile_windows_config</code></a> - (Required, when a windows machine) A Windows config block as documented below.
</li>
<li><a name="os_profile_linux_config" /><a href="#os_profile_linux_config"><code>os_profile_linux_config</code></a> - (Required, when a linux machine) A Linux config block as documented below.
</li>
<li><a name="network_profile" /><a href="#network_profile"><code>network_profile</code></a> - (Required) A collection of network profile block as documented below.
</li>
<li><a name="storage_profile_os_disk" /><a href="#storage_profile_os_disk"><code>storage_profile_os_disk</code></a> - (Required) A storage profile os disk block as documented below
</li>
<li><a name="storage_profile_image_reference" /><a href="#storage_profile_image_reference"><code>storage_profile_image_reference</code></a> - (Optional) A storage profile image reference block as documented below.
</li>
<li><a name="extension" /><a href="#extension"><code>extension</code></a> - (Optional) Can be specified multiple times to add extension profiles to the scale set. Each <code>extension</code> block supports the fields documented below.
</li>
<li><a name="plan" /><a href="#plan"><code>plan</code></a> - (Optional) A plan block as documented below.
</li>
<li><a name="priority" /><a href="#priority"><code>priority</code></a> - (Optional) Specifies the priority for the virtual machines in the scale set, defaults to <code>Regular</code>. Possible values are <code>Low</code> and <code>Regular</code>.
</li>
<li><a name="tags" /><a href="#tags"><code>tags</code></a> - (Optional) A mapping of tags to assign to the resource.
</li>
</ul>
<div class="alert alert-info" role="alert">
<p><strong>Please Note</strong>: Availability Zones are <a href="https://docs.microsoft.com/en-us/azure/availability-zones/az-overview">in Preview and only supported in several regions at this time</a> - as such you must be opted into the Preview to use this functionality. You can <a href="http://aka.ms/azenroll">opt into the Availability Zones Preview in the Azure Portal</a>.</p>
</div>
<p><code>sku</code> supports the following:</p>

<ul>
<li><a name="name-1" /><a href="#name-1"><code>name</code></a> - (Required) Specifies the size of virtual machines in a scale set.
</li>
<li><a name="tier" /><a href="#tier"><code>tier</code></a> - (Optional) Specifies the tier of virtual machines in a scale set. Possible values, <code>standard</code> or <code>basic</code>.
</li>
<li><a name="capacity" /><a href="#capacity"><code>capacity</code></a> - (Required) Specifies the number of virtual machines in the scale set.
</li>
</ul>
<p><code>identity</code> supports the following:</p>

<ul>
<li><a name="type" /><a href="#type"><code>type</code></a> - (Required) Specifies the identity type to be assigned to the scale set. The only allowable value is <code>SystemAssigned</code>. To enable Managed Service Identity (MSI) on all machines in the scale set, an extension with the type &quot;ManagedIdentityExtensionForWindows&quot; or &quot;ManagedIdentityExtensionForLinux&quot; must also be added. The scale set&#39;s Service Principal ID (SPN) can be retrieved after the scale set has been created.
</li>
</ul>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"azurestack_virtual_machine_scale_set"</span> <span class="s2">"test"</span> <span class="p">{</span>
  <span class="nb">name</span>                <span class="o">=</span> <span class="s2">"vm-scaleset"</span>
  <span class="n">resource_group_name</span> <span class="o">=</span> <span class="s2">"${azurestack_resource_group.test.name}"</span>
  <span class="n">location</span>            <span class="o">=</span> <span class="s2">"${azurestack_resource_group.test.location}"</span>

  <span class="n">sku</span> <span class="p">{</span>
    <span class="nb">name</span>     <span class="o">=</span> <span class="s2">"${var.vm_sku}"</span>
    <span class="n">tier</span>     <span class="o">=</span> <span class="s2">"Standard"</span>
    <span class="n">capacity</span> <span class="o">=</span> <span class="s2">"${var.instance_count}"</span>
  <span class="p">}</span>

  <span class="n">identity</span> <span class="p">{</span>
    <span class="n">type</span> <span class="o">=</span> <span class="s2">"systemAssigned"</span>
  <span class="p">}</span>

  <span class="n">extension</span> <span class="p">{</span>
    <span class="nb">name</span>                 <span class="o">=</span> <span class="s2">"MSILinuxExtension"</span>
    <span class="n">publisher</span>            <span class="o">=</span> <span class="s2">"Microsoft.ManagedIdentity"</span>
    <span class="n">type</span>                 <span class="o">=</span> <span class="s2">"ManagedIdentityExtensionForLinux"</span>
    <span class="n">type_handler_version</span> <span class="o">=</span> <span class="s2">"1.0"</span>
    <span class="n">settings</span>             <span class="o">=</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">port</span><span class="se">\"</span><span class="s2">: 50342}"</span>
  <span class="p">}</span>

  <span class="n">output</span> <span class="s2">"principal_id"</span> <span class="p">{</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s2">"${lookup(azurestack_virtual_machine.test.identity[0], "</span><span class="n">principal_id</span><span class="s2">")}"</span>
  <span class="p">}</span>
</code></pre></div><p><code>os_profile</code> supports the following:</p>

<ul>
<li><a name="computer_name_prefix" /><a href="#computer_name_prefix"><code>computer_name_prefix</code></a> - (Required) Specifies the computer name prefix for all of the virtual machines in the scale set. Computer name prefixes must be 1 to 9 characters long for windows images and 1 - 58 for linux. Changing this forces a new resource to be created.
</li>
<li><a name="admin_username" /><a href="#admin_username"><code>admin_username</code></a> - (Required) Specifies the administrator account name to use for all the instances of virtual machines in the scale set.
</li>
<li><a name="admin_password" /><a href="#admin_password"><code>admin_password</code></a> - (Required) Specifies the administrator password to use for all the instances of virtual machines in a scale set.
</li>
<li><a name="custom_data" /><a href="#custom_data"><code>custom_data</code></a> - (Optional) Specifies custom data to supply to the machine. On linux-based systems, this can be used as a cloud-init script. On other systems, this will be copied as a file on disk. Internally, Terraform will base64 encode this value before sending it to the API. The maximum length of the binary array is 65535 bytes.
</li>
</ul>
<p><code>os_profile_secrets</code> supports the following:</p>

<ul>
<li><a name="source_vault_id" /><a href="#source_vault_id"><code>source_vault_id</code></a> - (Required) Specifies the key vault to use.
</li>
<li><a name="vault_certificates" /><a href="#vault_certificates"><code>vault_certificates</code></a> - (Required, on windows machines) A collection of Vault Certificates as documented below
</li>
</ul>
<p><code>vault_certificates</code> support the following:</p>

<ul>
<li><a name="certificate_url" /><a href="#certificate_url"><code>certificate_url</code></a> - (Required) It is the Base64 encoding of a JSON Object that which is encoded in UTF-8 of which the contents need to be <code>data</code>, <code>dataType</code> and <code>password</code>.
</li>
<li><a name="certificate_store" /><a href="#certificate_store"><code>certificate_store</code></a> - (Required, on windows machines) Specifies the certificate store on the Virtual Machine where the certificate should be added to.
</li>
</ul>
<p><code>os_profile_windows_config</code> supports the following:</p>

<ul>
<li><a name="provision_vm_agent" /><a href="#provision_vm_agent"><code>provision_vm_agent</code></a> - (Optional) Indicates whether virtual machine agent should be provisioned on the virtual machines in the scale set.
</li>
<li><a name="enable_automatic_upgrades" /><a href="#enable_automatic_upgrades"><code>enable_automatic_upgrades</code></a> - (Optional) Indicates whether virtual machines in the scale set are enabled for automatic updates.
</li>
<li><a name="winrm" /><a href="#winrm"><code>winrm</code></a> - (Optional) A collection of WinRM configuration blocks as documented below.
</li>
<li><a name="additional_unattend_config" /><a href="#additional_unattend_config"><code>additional_unattend_config</code></a> - (Optional) An Additional Unattended Config block as documented below.
</li>
</ul>
<p><code>winrm</code> supports the following:</p>

<ul>
<li><a name="protocol" /><a href="#protocol"><code>protocol</code></a> - (Required) Specifies the protocol of listener
</li>
<li><a name="certificate_url-1" /><a href="#certificate_url-1"><code>certificate_url</code></a> - (Optional) Specifies URL of the certificate with which new Virtual Machines is provisioned.
</li>
</ul>
<p><code>additional_unattend_config</code> supports the following:</p>

<ul>
<li><a name="pass" /><a href="#pass"><code>pass</code></a> - (Required) Specifies the name of the pass that the content applies to. The only allowable value is <code>oobeSystem</code>.
</li>
<li><a name="component" /><a href="#component"><code>component</code></a> - (Required) Specifies the name of the component to configure with the added content. The only allowable value is <code>Microsoft-Windows-Shell-Setup</code>.
</li>
<li><a name="setting_name" /><a href="#setting_name"><code>setting_name</code></a> - (Required) Specifies the name of the setting to which the content applies. Possible values are: <code>FirstLogonCommands</code> and <code>AutoLogon</code>.
</li>
<li><a name="content" /><a href="#content"><code>content</code></a> - (Optional) Specifies the base-64 encoded XML formatted content that is added to the unattend.xml file for the specified path and component.
</li>
</ul>
<p><code>os_profile_linux_config</code> supports the following:</p>

<ul>
<li><a name="disable_password_authentication" /><a href="#disable_password_authentication"><code>disable_password_authentication</code></a> - (Required) Specifies whether password authentication should be disabled. Changing this forces a new resource to be created.
</li>
<li><a name="ssh_keys" /><a href="#ssh_keys"><code>ssh_keys</code></a> - (Optional) Specifies a collection of <code>path</code> and <code>key_data</code> to be placed on the virtual machine.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><em><strong>Note:</strong> Please note that the only allowed <code>path</code> is <code>/home/&lt;username&gt;/.ssh/authorized_keys</code> due to a limitation of Azure</em></p>
</div>
<p><code>network_profile</code> supports the following:</p>

<ul>
<li><a name="name-2" /><a href="#name-2"><code>name</code></a> - (Required) Specifies the name of the network interface configuration.
</li>
<li><a name="primary" /><a href="#primary"><code>primary</code></a> - (Required) Indicates whether network interfaces created from the network interface configuration will be the primary NIC of the VM.
</li>
<li><a name="ip_configuration" /><a href="#ip_configuration"><code>ip_configuration</code></a> - (Required) An ip_configuration block as documented below.
</li>
</ul>
<p><code>public_ip_address_configuration</code> supports the following:</p>

<ul>
<li><a name="name-3" /><a href="#name-3"><code>name</code></a> - (Required) The name of the public ip address configuration
</li>
<li><a name="idle_timeout" /><a href="#idle_timeout"><code>idle_timeout</code></a> - (Required) The idle timeout in minutes. This value must be between 4 and 32.
</li>
<li><a name="domain_name_label" /><a href="#domain_name_label"><code>domain_name_label</code></a> - (Required) The domain name label for the dns settings.
</li>
</ul>
<p><code>storage_profile_os_disk</code> supports the following:</p>

<ul>
<li><a name="name-4" /><a href="#name-4"><code>name</code></a> - (Optional) Specifies the disk name. Must be specified when using unmanaged disk (&#39;managed_disk_type&#39; property not set).
</li>
<li><a name="vhd_containers" /><a href="#vhd_containers"><code>vhd_containers</code></a> - (Optional) Specifies the vhd uri. Cannot be used when <code>image</code> or <code>managed_disk_type</code> is specified.
</li>
<li><a name="managed_disk_type" /><a href="#managed_disk_type"><code>managed_disk_type</code></a> - (Optional) Specifies the type of managed disk to create. Value you must be either <code>Standard_LRS</code> or <code>Premium_LRS</code>. Cannot be used when <code>vhd_containers</code> or <code>image</code> is specified.
</li>
<li><a name="create_option" /><a href="#create_option"><code>create_option</code></a> - (Required) Specifies how the virtual machine should be created. The only possible option is <code>FromImage</code>.
</li>
<li><a name="caching" /><a href="#caching"><code>caching</code></a> - (Optional) Specifies the caching requirements. Possible values include: <code>None</code> (default), <code>ReadOnly</code>, <code>ReadWrite</code>.
</li>
<li><a name="image" /><a href="#image"><code>image</code></a> - (Optional) Specifies the blob uri for user image. A virtual machine scale set creates an os disk in the same container as the user image.
                   Updating the osDisk image causes the existing disk to be deleted and a new one created with the new image. If the VM scale set is in Manual upgrade mode then the virtual machines are not updated until they have manualUpgrade applied to them.
                   When setting this field <code>os_type</code> needs to be specified.
</li>
<li><a name="os_type" /><a href="#os_type"><code>os_type</code></a> - (Optional) Specifies the operating system Type, valid values are windows, linux.
</li>
</ul>
<p><code>storage_profile_data_disk</code> supports the following:</p>

<ul>
<li><a name="lun" /><a href="#lun"><code>lun</code></a> - (Required) Specifies the Logical Unit Number of the disk in each virtual machine in the scale set.
</li>
<li><a name="create_option-1" /><a href="#create_option-1"><code>create_option</code></a> - (Optional) Specifies how the data disk should be created. The only possible options are <code>FromImage</code> and <code>Empty</code>.
</li>
<li><a name="caching-1" /><a href="#caching-1"><code>caching</code></a> - (Optional) Specifies the caching requirements. Possible values include: <code>None</code> (default), <code>ReadOnly</code>, <code>ReadWrite</code>.
</li>
<li><a name="disk_size_gb" /><a href="#disk_size_gb"><code>disk_size_gb</code></a> - (Optional) Specifies the size of the disk in GB. This element is required when creating an empty disk.
</li>
</ul>
<p><code>storage_profile_image_reference</code> supports the following:</p>

<ul>
<li><a name="id" /><a href="#id"><code>id</code></a> - (Optional) Specifies the ID of the (custom) image to use to create the virtual
machine scale set, as in the <a href="#example-of-storage_profile_image_reference-with-id">example below</a>.
</li>
<li><a name="publisher" /><a href="#publisher"><code>publisher</code></a> - (Optional) Specifies the publisher of the image used to create the virtual machines.
</li>
<li><a name="offer" /><a href="#offer"><code>offer</code></a> - (Optional) Specifies the offer of the image used to create the virtual machines.
</li>
<li><a name="sku-1" /><a href="#sku-1"><code>sku</code></a> - (Optional) Specifies the SKU of the image used to create the virtual machines.
</li>
<li><a name="version" /><a href="#version"><code>version</code></a> - (Optional) Specifies the version of the image used to create the virtual machines.
</li>
</ul>
<p><code>boot_diagnostics</code> supports the following:</p>

<ul>
<li><a name="enabled" /><a href="#enabled"><code>enabled</code></a>: (Required) Whether to enable boot diagnostics for the virtual machine.
</li>
<li><a name="storage_uri" /><a href="#storage_uri"><code>storage_uri</code></a>: (Required) Blob endpoint for the storage account to hold the virtual machine&#39;s diagnostic files. This must be the root of a storage account, and not a storage container.
</li>
</ul>
<p><code>extension</code> supports the following:</p>

<ul>
<li><a name="name-5" /><a href="#name-5"><code>name</code></a> - (Required) Specifies the name of the extension.
</li>
<li><a name="publisher-1" /><a href="#publisher-1"><code>publisher</code></a> - (Required) The publisher of the extension, available publishers can be found by using the Azure CLI.
</li>
<li><a name="type-1" /><a href="#type-1"><code>type</code></a> - (Required) The type of extension, available types for a publisher can be found using the Azure CLI.
</li>
<li><a name="type_handler_version" /><a href="#type_handler_version"><code>type_handler_version</code></a> - (Required) Specifies the version of the extension to use, available versions can be found using the Azure CLI.
</li>
<li><a name="auto_upgrade_minor_version" /><a href="#auto_upgrade_minor_version"><code>auto_upgrade_minor_version</code></a> - (Optional) Specifies whether or not to use the latest minor version available.
</li>
<li><a name="settings" /><a href="#settings"><code>settings</code></a> - (Required) The settings passed to the extension, these are specified as a JSON object in a string.
</li>
<li><a name="protected_settings" /><a href="#protected_settings"><code>protected_settings</code></a> - (Optional) The protected_settings passed to the extension, like settings, these are specified as a JSON object in a string.
</li>
</ul>
<p><code>plan</code> supports the following:</p>

<ul>
<li><a name="name-6" /><a href="#name-6"><code>name</code></a> - (Required) Specifies the name of the image from the marketplace.
</li>
<li><a name="publisher-2" /><a href="#publisher-2"><code>publisher</code></a> - (Required) Specifies the publisher of the image.
</li>
<li><a name="product" /><a href="#product"><code>product</code></a> - (Required) Specifies the product of the image from the marketplace.
</li>
</ul>
<h2 id="example-of-storage_profile_image_reference-with-id">
  <a name="example-of-storage_profile_image_reference-with-id" class="anchor" href="#example-of-storage_profile_image_reference-with-id">&raquo;</a>
  Example of storage_profile_image_reference with id
</h2>
<div class="highlight"><pre class="highlight hcl"><code>
<span class="n">resource</span> <span class="s2">"azurestack_image"</span> <span class="s2">"test"</span> <span class="p">{</span>
    <span class="nb">name</span> <span class="o">=</span> <span class="s2">"test"</span>
  <span class="o">...</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">"azurestack_virtual_machine_scale_set"</span> <span class="s2">"test"</span> <span class="p">{</span>
    <span class="nb">name</span> <span class="o">=</span> <span class="s2">"test"</span>
  <span class="o">...</span>

    <span class="n">storage_profile_image_reference</span> <span class="p">{</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="s2">"${azurestack_image.test.id}"</span>
    <span class="p">}</span>

<span class="o">...</span>
</code></pre></div><h2 id="attributes-reference">
  <a name="attributes-reference" class="anchor" href="#attributes-reference">&raquo;</a>
  Attributes Reference
</h2>
<p>The following attributes are exported:</p>

<ul>
<li><a name="id-1" /><a href="#id-1"><code>id</code></a> - The virtual machine scale set ID.
</li>
<li><a name="boot_diagnostics" /><a href="#boot_diagnostics"><code>boot_diagnostics</code></a> - A boot diagnostics profile block as referenced below.
</li>
</ul>
<h2 id="import">
  <a name="import" class="anchor" href="#import">&raquo;</a>
  Import
</h2>
<p>Virtual Machine Scale Sets can be imported using the <code>resource id</code>, e.g.</p>
<div class="highlight"><pre class="highlight shell"><code>terraform import azurestack_virtual_machine_scale_set.scaleset1 /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mygroup1/providers/Microsoft.Compute/virtualMachineScaleSets/scaleset1
</code></pre></div>

    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="/intro/index.html">Intro</a></li>
              <li><a href="/docs/index.html">Docs</a></li>
              <li><a href="/docs/extend/index.html">Extend</a></li>
              <li><a href="https://www.hashicorp.com/privacy">Privacy</a></li>
              <li><a href="/security.html">Security</a></li>
              <li><a href="/assets/files/press-kit.zip">Press Kit</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="https://github.com/hashicorp/terraform-website">Edit this page</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Product",
        "name": "Terraform",
        "alternateName": "Terraform by HashiCorp",
        "manufacturer": "HashiCorp",
        "url": "https://www.terraform.io",
        "logo": "https://www.terraform.io/assets/images/logo-hashicorp-3f10732f.svg",
        "sameAs": [
          "https://github.com/hashicorp/terraform"
        ]
      }
    </script>
  </body>
</html>
